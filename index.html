<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>MPS的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="MPS的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="MPS的个人博客">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MPS的个人博客">
  
    <link rel="alternate" href="/atom.xml" title="MPS的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MPS的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-解决无法使用Pycharm自带的pip安装第三方库的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/" class="article-date">
  <time datetime="2020-12-09T01:42:59.000Z" itemprop="datePublished">2020-12-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/">解决无法使用Pycharm自带的pip安装第三方库的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上次写可视化作业的时候，用pycharm出现了一个问题：无法直接使用IDE的setting中的pip安装第三方库。</p>
<p>几经周折之下，在Stack Overflow上找到了解答。</p>
<p>只要在新建项目的时候添加一个设定就可以了！</p>
<br>

<p>解决方法：</p>
<p>使用Pycharm，点击New Project，选择Pure Python（使用新建flask项目和Django项目的时候，我没有遇到上述的问题），<strong>勾选inherit global-site packges</strong>，新建项目即可~</p>
<br>

<p>由于Pycharm新建Pure Python项目的时候，是默认只使用本地的包的，所以当IDE使用pip命令下载第三方库的时候，系统会报错。只能直接只用终端的pip命令，才能够正常安装包。</p>
<p>勾选inherit选项能够允许IDE继承全局的第三方库，即Pycharm能够帮用户安装包，问题得到解决。</p>
<p><a href="https://stackoverflow.com/questions/51292729/pycharm-cannt-find-the-packages-or-modules-installed-with-pip-on-windows" target="_blank" rel="noopener">参考文章</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/" data-id="ckigrcux6001c2kujdzu8a3bg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/" class="article-date">
  <time datetime="2020-12-06T02:33:44.000Z" itemprop="datePublished">2020-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/">使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这周要完成大数据可视化的第一次作业，使用python实现最近很火的条形图竞赛效果。</p>
<p>上知乎参考了一下已有的代码，结合自己的需求，修改了一下。</p>
<p>在github上找到了大佬整理丁香园的新冠疫情数据，直接fork下来了。</p>
<br>

<h2 id="需要解决的问题："><a href="#需要解决的问题：" class="headerlink" title="需要解决的问题："></a>需要解决的问题：</h2><ol>
<li><h3 id="根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案："><a href="#根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案：" class="headerlink" title="根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案："></a>根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案：</h3><ol>
<li>我的思路是导出目标属性列，使用set集合去重，获得颜色方案的数目</li>
<li>使用<code>pyplot.cm.get_cmap()</code>方法，根据需要的配色方案，生成随机颜色</li>
<li>把颜色和属性值映射到一个字典上，方便后续绘图调用</li>
<li>除了这种方案，还可以生成随机数转十六进制，获取RBG颜色方案，详细见被注释起来的代码</li>
</ol>
</li>
<li><h3 id="获得具体日期序列"><a href="#获得具体日期序列" class="headerlink" title="获得具体日期序列"></a>获得具体日期序列</h3><ol>
<li>由于收集数据的dateId是整型数据，不能直接用<code>range()</code>生成序列（否则会出现20200166这种不存在的日期）</li>
<li>可以使用datetime标准库生成某段日期之间的时间序列，指定数据中的dateId</li>
<li>在绘图的时候，直接打印dateId的效果不太好，绘图是应该在把dateId转换为xxx年xx月xx日的中文格式</li>
</ol>
</li>
<li><h3 id="关于可视化图的实现"><a href="#关于可视化图的实现" class="headerlink" title="关于可视化图的实现"></a>关于可视化图的实现</h3><ol>
<li>可以参照具体的代码，这一部分主要是参照其它大佬的</li>
<li>使用matplotlib的animation库多次调用绘图函数，根据不同的日期绘制动图的某一帧</li>
<li>关于动图帧，就是根据累计治愈人数把筛选出来的数据排序，再根据省份名把颜色对应上去绘制条形图</li>
<li>当然除了绘制条形图还要绘制个各种标签，具体实现这里不展开</li>
</ol>
</li>
</ol>
<br>

<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p>由于目前域名还没有备案，图床暂时挂了，等元旦域名备案之后，就把图片补上来！</p>
<br>

<h2 id="具体的代码如下："><a href="#具体的代码如下：" class="headerlink" title="具体的代码如下："></a>具体的代码如下：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> ticker</span><br><span class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">draw_barchart</span><span class="params">(dateId)</span>:</span></span><br><span class="line">    <span class="comment"># 截取某一天的数据，并且使用value排序，保留前十项数据，用于绘制</span></span><br><span class="line">    dff = df[df[<span class="string">'dateId'</span>].eq(dateId)].sort_values(by=<span class="string">'curedCount'</span>, ascending=<span class="literal">True</span>).tail(<span class="number">10</span>)</span><br><span class="line">    ax.clear()  <span class="comment"># 清空上次绘制的图像</span></span><br><span class="line">    <span class="comment"># 根据不同城市的名字，配置不同的颜色，绘制条形图</span></span><br><span class="line">    ax.barh(dff[<span class="string">'provinceShortName'</span>], dff[<span class="string">'curedCount'</span>], color=[color_dic.get(x) <span class="keyword">for</span> x <span class="keyword">in</span> dff[<span class="string">'provinceShortName'</span>]])</span><br><span class="line">    <span class="comment"># 绘制每行的标签和属性值文本</span></span><br><span class="line">    dx = dff[<span class="string">'curedCount'</span>].max() / <span class="number">200</span>  <span class="comment"># 规定每个标签文本和条形终点的间隔</span></span><br><span class="line">    <span class="keyword">for</span> i, (curedCount, provinceShortName) <span class="keyword">in</span> enumerate(zip(dff[<span class="string">'curedCount'</span>], dff[<span class="string">'provinceShortName'</span>])):</span><br><span class="line">        ax.text(curedCount - dx, i, provinceShortName, size=<span class="number">14</span>, weight=<span class="number">600</span>, ha=<span class="string">'right'</span>, va=<span class="string">'bottom'</span>)  <span class="comment"># 绘制省份名</span></span><br><span class="line">        ax.text(curedCount + dx, i, <span class="string">f'<span class="subst">&#123;curedCount:,<span class="number">.0</span>f&#125;</span>'</span>, size=<span class="number">14</span>, ha=<span class="string">'left'</span>, va=<span class="string">'center'</span>)  <span class="comment"># 绘制属性值</span></span><br><span class="line">    <span class="comment"># 配置整体的显示效果</span></span><br><span class="line">    dateStr = str(dateId)</span><br><span class="line">    date_str_fmt = <span class="string">"&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日"</span>.format(dateStr[:<span class="number">4</span>], dateStr[<span class="number">4</span>:<span class="number">6</span>], dateStr[<span class="number">6</span>:])  <span class="comment"># 把日期id转换为中文格式</span></span><br><span class="line">    ax.text(<span class="number">1</span>, <span class="number">0.2</span>, date_str_fmt, transform=ax.transAxes, color=<span class="string">'#777777'</span>, size=<span class="number">46</span>, ha=<span class="string">'right'</span>, weight=<span class="number">800</span>)  <span class="comment"># 绘制日期id</span></span><br><span class="line">    ax.text(<span class="number">0</span>, <span class="number">1.06</span>, <span class="string">'累计治愈人数(单位：人)'</span>, transform=ax.transAxes, size=<span class="number">12</span>, color=<span class="string">'#777777'</span>)  <span class="comment"># 绘制标签单位注解</span></span><br><span class="line">    ax.xaxis.set_major_formatter(ticker.StrMethodFormatter(<span class="string">'&#123;x:,.0f&#125;'</span>))</span><br><span class="line">    ax.xaxis.set_ticks_position(<span class="string">'top'</span>)</span><br><span class="line">    ax.tick_params(axis=<span class="string">'x'</span>, colors=<span class="string">'#777777'</span>, labelsize=<span class="number">12</span>)</span><br><span class="line">    ax.set_yticks([])</span><br><span class="line">    ax.margins(<span class="number">0</span>, <span class="number">0.01</span>)</span><br><span class="line">    ax.grid(which=<span class="string">'major'</span>, axis=<span class="string">'x'</span>, linestyle=<span class="string">'-'</span>)</span><br><span class="line">    ax.set_axisbelow(<span class="literal">True</span>)</span><br><span class="line">    ax.text(<span class="number">0</span>, <span class="number">1.10</span>, <span class="string">'2020年1月31日到7月2日全国(除湖北省外)各省份及地区累计新冠治愈病例可视化图'</span>,</span><br><span class="line">            transform=ax.transAxes, size=<span class="number">24</span>, weight=<span class="number">600</span>, ha=<span class="string">'left'</span>)</span><br><span class="line">    plt.box(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">datelist</span><span class="params">(beginDate, endDate)</span>:</span></span><br><span class="line">    <span class="comment"># beginDate, endDate是形如‘20160601’的整形列表</span></span><br><span class="line">    date_l=[datetime.strftime(x,<span class="string">'%Y%m%d'</span>) <span class="keyword">for</span> x <span class="keyword">in</span> list(pd.date_range(start=beginDate, end=endDate))]</span><br><span class="line">    date_set = list()</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> date_l:</span><br><span class="line">        date_set.append(int(x))</span><br><span class="line">    <span class="keyword">return</span> date_set</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    mpl.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'FangSong'</span>]  <span class="comment"># 指定默认中文字体</span></span><br><span class="line"></span><br><span class="line">    data_route = <span class="string">'china_provincedata_without_HB.csv'</span>  <span class="comment"># 载入疫情数据，根据累计治愈，日期和省份缩写筛选三列信息</span></span><br><span class="line">    df = pd.read_csv(data_route, usecols=[<span class="string">'curedCount'</span>, <span class="string">'dateId'</span>, <span class="string">'provinceShortName'</span>])</span><br><span class="line"></span><br><span class="line">    pvc_list = list(set(df[<span class="string">'provinceShortName'</span>]))  <span class="comment"># 获取省份列表</span></span><br><span class="line">    pvc_num = len(pvc_list)</span><br><span class="line">    cmap = plt.cm.get_cmap(<span class="string">"hsv"</span>, pvc_num + <span class="number">1</span>)  <span class="comment"># 随机生成省份数目对应的配色方案</span></span><br><span class="line">    <span class="comment"># 生成配色方案字典  如：&#123;'广东': (1.0, 0.0, 0.0, 1.0)&#125;</span></span><br><span class="line">    color_dic = dict()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(pvc_num):</span><br><span class="line">        <span class="comment"># rc = lambda: random.randint(0, 255)</span></span><br><span class="line">        <span class="comment"># color_dic.update(&#123;pvc_list[i]: ('#%02X%02X%02X' % (rc(), rc(), rc()))&#125;)</span></span><br><span class="line">        color_dic.update(&#123;pvc_list[i]: cmap(i)&#125;)</span><br><span class="line"></span><br><span class="line">    fig, ax = plt.subplots(figsize=(<span class="number">15</span>, <span class="number">8</span>))  <span class="comment"># 指定生成图的尺寸</span></span><br><span class="line"></span><br><span class="line">    date_set = datelist(<span class="string">'2020/1/31'</span>, <span class="string">'2020/07/02'</span>)</span><br><span class="line">    animator = animation.FuncAnimation(fig, draw_barchart, frames=date_set)  <span class="comment"># 生成动画</span></span><br><span class="line">    animator.save(<span class="string">'新冠疫情累计治愈数据可视化.gif'</span>)  <span class="comment"># 保存gif</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/" data-id="ckigrcuwe000d2kuju1snvmuq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-关于Spring-Security文档上密码发展史的阅读报告" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/" class="article-date">
  <time datetime="2020-11-24T10:43:05.000Z" itemprop="datePublished">2020-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/">关于Spring Security文档上密码发展史的阅读报告</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这周做实验，服务器宕机了</p>
<p>刚好闲着无聊，有机会看一下<a href="https://docs.spring.io/spring-security/site/docs/5.4.1/reference/html5/#features" target="_blank" rel="noopener">security的文档</a>。</p>
<p>突然看到一段密码存储的发展史</p>
<p>个人觉得挺有意思的，记录一下</p>
<br>

<br>

<h2 id="简单翻译记录一下："><a href="#简单翻译记录一下：" class="headerlink" title="简单翻译记录一下："></a>简单翻译记录一下：</h2><p>一开始用于用户认证的密码，是直接以文本形式存储在服务器的。</p>
<p>也就是说，用户的密码没有经过任何加密就直接存储在服务器的。</p>
<p>在这种情况下，有的黑客使用SQL inject等技术，攻击服务器，直接穷举出用户的密码。</p>
<p>然后利用窃取的密码，查看用户持有的数据！</p>
<p>为了应对这种情况，有开发者使用了哈希函数进行加密</p>
<p>将用户的密码进行一次哈希加密，再存储到数据库当中</p>
<p>这样，即便黑客通过服务器数据库穷举到了用户密码对应的哈希值，还是很难知道哈希值对应的用户密码</p>
<p>因此，用户密码的安全性暂时得以保障。</p>
<br>

<p>可是，道高一尺魔高一丈，黑客们又开始想到了Rainbow Table技术</p>
<p>黑客长时间穷举用户密码，并且把穷举像存储到一个彩虹表中，然后一次性攻击窃取密码</p>
<p>为了应对RainbowTable，开发者们开始使用“腌制过的密码”存储用户密码。</p>
<p>腌制过的密码是指，加入了salt的密码</p>
<p>salt是每个用户特有的一串字符</p>
<p>服务器存储的密码，通过salt和用户密码文本进行混合哈希运算，得到哈希值</p>
<p>通过这种技术，加大了黑客穷举密码的难度~</p>
<br>

<p>但是，随着计算机硬件的不断发展。</p>
<p>我们知道，现在的机器已经可以快速穷举256位的字符串来穷举密码了，所以”Salted Password”也不好用了</p>
<p>现在，开发者们建议使用自适应的单射函数（adaptive one-way function）进行哈希映射</p>
<p>这种哈希映射，可以给存储的密码提供一个工作因子（work factor）</p>
<p>工作因子可以根据客户端的硬件水平，让用户在客户端花一秒左右的时间才能完成哈希映射</p>
<p>通过这种技术，可以防止黑客短时间内发动多次密码穷举，保证了用户密码的安全性。</p>
<p>而Spring Security框架可以直接使用 bcrypt, PBKDF2, scrypt和argon2等加密方式</p>
<p>这些加密方式就是上面的加密手段，可以大大提高用户密码的安全性。</p>
<br>

<br>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>可以说这篇文档上所写的密码的发展史，是一部开发者和黑客斗智斗勇的历史</p>
<p>当然数学家在其中也扮演了极其重要的角色</p>
<p>随着技术的发展，我们有理由相信，新的破解技术会不断地产生，新的加密手段也会应运而生</p>
<p>到时候，我们这些只会复制粘贴的小菜鸡应该能够看到更为精彩的现代密码学“神仙打架”啦！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/" data-id="ckigrcuwp000p2kuju8y3pxv1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-大数据架构作业-简答题7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/24/大数据架构作业-简答题7/" class="article-date">
  <time datetime="2020-11-24T10:37:49.000Z" itemprop="datePublished">2020-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/24/大数据架构作业-简答题7/">大数据架构作业-简答题7</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>最后一次大数据架构超星作业了，终于结束了罪恶的ppt复制粘贴答题了。</em></p>
<br>

<br>

<blockquote>
<h2 id="1-简要说明流数据的特点以及流计算的需求和处理流程。"><a href="#1-简要说明流数据的特点以及流计算的需求和处理流程。" class="headerlink" title="1 简要说明流数据的特点以及流计算的需求和处理流程。"></a>1 简要说明流数据的特点以及流计算的需求和处理流程。</h2></blockquote>
<h3 id="流数据的特点："><a href="#流数据的特点：" class="headerlink" title="流数据的特点："></a>流数据的特点：</h3><ol>
<li>无穷无尽的数据连续、快速地传输；</li>
<li>数据的来源众多，而且格式复杂；</li>
<li>数据量巨大，一般不关注存储，经过处理之后会被丢弃或者被归档存储；</li>
<li>不会过分关注个别数据，注重数据的整体价值；</li>
<li>数据的顺序有可能颠倒，或者不完整。</li>
</ol>
<br>

<h3 id="流计算系统的需求："><a href="#流计算系统的需求：" class="headerlink" title="流计算系统的需求："></a>流计算系统的需求：</h3><ol>
<li>高性能；</li>
<li>海量处理；</li>
<li>实时处理；</li>
<li>分布式处理；</li>
<li>简单易用；</li>
<li>可靠性高。</li>
</ol>
<br>

<h3 id="流计算的处理流程："><a href="#流计算的处理流程：" class="headerlink" title="流计算的处理流程："></a>流计算的处理流程：</h3><ol>
<li>数据实时采集；</li>
<li>数据实时计算；</li>
<li>提供实时查询服务。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="2-简要说明Spark解决流计算的基本思路和不足之处。"><a href="#2-简要说明Spark解决流计算的基本思路和不足之处。" class="headerlink" title="2 简要说明Spark解决流计算的基本思路和不足之处。"></a>2 简要说明Spark解决流计算的基本思路和不足之处。</h2></blockquote>
<h3 id="Spark解决流计算的思路："><a href="#Spark解决流计算的思路：" class="headerlink" title="Spark解决流计算的思路："></a>Spark解决流计算的思路：</h3><p>Spark使用Spark Streaming处理流数据，把数据流以时间片为单位，切割成一段一段的数据，每段数据作为一个批处理请求，通过Spark批处理引擎，模仿实现流处理。</p>
<br>

<h3 id="Spark处理流计算的不足之处："><a href="#Spark处理流计算的不足之处：" class="headerlink" title="Spark处理流计算的不足之处："></a>Spark处理流计算的不足之处：</h3><p>Spark Streaming无法实现毫秒级需求的流计算业务，进而无法承载实时性要求很高的应用。</p>
<br>

<br>

<blockquote>
<h2 id="3-说明Flink框架中处理时间和事件时间的概念和区别。"><a href="#3-说明Flink框架中处理时间和事件时间的概念和区别。" class="headerlink" title="3 说明Flink框架中处理时间和事件时间的概念和区别。"></a>3 说明Flink框架中处理时间和事件时间的概念和区别。</h2></blockquote>
<h3 id="处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。"><a href="#处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。" class="headerlink" title="处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。"></a>处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。</h3><br>

<h3 id="事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。"><a href="#事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。" class="headerlink" title="事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。"></a>事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。</h3><br>

<h3 id="处理时间和事件时间的区别："><a href="#处理时间和事件时间的区别：" class="headerlink" title="处理时间和事件时间的区别："></a>处理时间和事件时间的区别：</h3><ol>
<li>由于数据流可能存在延迟或者乱序到达，两者的具体数值可能相差极大；</li>
<li>处理时间的结果取决于处理速度，不能够保证其结果的准确性，可以实现低延迟特性；</li>
<li>事件时间可以处理迟到和乱序的事件流，可以保证结果的确定性。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="4-简要介绍Flink提供的窗口操作及其分类。"><a href="#4-简要介绍Flink提供的窗口操作及其分类。" class="headerlink" title="4 简要介绍Flink提供的窗口操作及其分类。"></a>4 简要介绍Flink提供的窗口操作及其分类。</h2></blockquote>
<h3 id="窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。"><a href="#窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。" class="headerlink" title="窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。"></a>窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。</h3><br>

<h3 id="窗口操作的分类："><a href="#窗口操作的分类：" class="headerlink" title="窗口操作的分类："></a>窗口操作的分类：</h3><ol>
<li>时间窗口；</li>
<li>技术窗口；</li>
<li>滚动窗口；</li>
<li>滑动窗口；</li>
<li>会话窗口。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="5-什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。"><a href="#5-什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。" class="headerlink" title="5 什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。"></a>5 什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。</h2></blockquote>
<h3 id="Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。"><a href="#Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。" class="headerlink" title="Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。"></a>Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。</h3><br>

<h3 id="Flink保持状态持久和恢复的机制："><a href="#Flink保持状态持久和恢复的机制：" class="headerlink" title="Flink保持状态持久和恢复的机制："></a>Flink保持状态持久和恢复的机制：</h3><ol>
<li>状态一致检查点。是指当所有任务的状态，在所有任务都处理完一个相同数据时，的一份状态拷贝。</li>
<li>全局一致性快照。使用检查点，记录文件系统集群所有节点的在某一时间点的状态。</li>
<li>通过分布式快照和状态检查点，实现了精确一次的语义，在各种故障的情况下，处理数据流的所有算子都保证，数据和事件只会被处理一次。具体操作如下：<ol>
<li>对流处理应哟红的每个算子的所有状态，定期做检查点；</li>
<li>若系统中任何地方发生错误，每个算子的所有状态回滚到最近的全局一致性快照；</li>
<li>整个流处理应用程序，回到最近的一次一致性状态，然后在该状态重新启动。</li>
</ol>
</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="6-举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。"><a href="#6-举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。" class="headerlink" title="6 举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。"></a>6 举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。</h2></blockquote>
<h3 id="逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。"><a href="#逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。" class="headerlink" title="逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。"></a>逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。</h3><br>

<h3 id="物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。"><a href="#物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。" class="headerlink" title="物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。"></a>物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。</h3><br>

<h3 id="数据交换策略类型："><a href="#数据交换策略类型：" class="headerlink" title="数据交换策略类型："></a>数据交换策略类型：</h3><ol>
<li>前向策略，将数据从一个任务发送到一个接受任务；</li>
<li>广播策略，将数据发送到算子的所有并行任务上；</li>
<li>基于键控的策略，通过键值对数据进行分区，保证相同键值的数据经同一任务处理；</li>
<li>随机策略，随机分配数据，便于将负载均匀分配到不同的计算任务。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="7-简要说明Flink架构中的主要角色及其功能。"><a href="#7-简要说明Flink架构中的主要角色及其功能。" class="headerlink" title="7 简要说明Flink架构中的主要角色及其功能。"></a>7 简要说明Flink架构中的主要角色及其功能。</h2></blockquote>
<h3 id="Flink架构中的主要角色以及功能："><a href="#Flink架构中的主要角色以及功能：" class="headerlink" title="Flink架构中的主要角色以及功能："></a>Flink架构中的主要角色以及功能：</h3><ol>
<li>Job Manager：作业管理器，又称为Master，负责资源申请、协调任务的分布式执行、协调检查点和失败恢复。</li>
<li>Task Manager：任务管理器，又称为Worker，负责任务执行，与Job Manager保持心跳沟通和汇报任务状态。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="8-说明Flink-on-YARN的两种作业运行模式。"><a href="#8-说明Flink-on-YARN的两种作业运行模式。" class="headerlink" title="8 说明Flink on YARN的两种作业运行模式。"></a>8 说明Flink on YARN的两种作业运行模式。</h2></blockquote>
<h3 id="Flink-on-YARN的两种作业运行模式："><a href="#Flink-on-YARN的两种作业运行模式：" class="headerlink" title="Flink on YARN的两种作业运行模式："></a>Flink on YARN的两种作业运行模式：</h3><ol>
<li><h4 id="会话方式："><a href="#会话方式：" class="headerlink" title="会话方式："></a>会话方式：</h4><ol>
<li>使用Flink中的yarn-session，启动Job Manager和Task Manager之后，yarn-session一直保持运行，等待接收客户端提交作业；</li>
<li>客户端通过yarn-session提交作业；</li>
<li>这种方式适合处理数量比较大，但是数据量比较小的作业。</li>
</ol>
</li>
<li><h4 id="分离模式："><a href="#分离模式：" class="headerlink" title="分离模式："></a>分离模式：</h4><ol>
<li>使用yarn-session直接提交作业到YARN集群；</li>
<li>这种方式适合处理数据量比较大的作业。</li>
</ol>
</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="9-说明Flink任务的调度与执行过程。"><a href="#9-说明Flink任务的调度与执行过程。" class="headerlink" title="9 说明Flink任务的调度与执行过程。"></a>9 说明Flink任务的调度与执行过程。</h2></blockquote>
<h3 id="Flin任务调度与执行："><a href="#Flin任务调度与执行：" class="headerlink" title="Flin任务调度与执行："></a>Flin任务调度与执行：</h3><ol>
<li>程序代码提交到应用程序的优化器或者图生成器，生成Dataflow提交到客户端的Actor系统；</li>
<li>Actor客户端提交作业，发送Dataflow到JobManager；</li>
<li>JobManager不断监听TaskManager的心跳消息，可以获取到有效的TaskManager信息；</li>
<li>JobManager通过调度器在TaskManager中调度任务，由任务槽执行任务；</li>
<li>程序运行的是时候，任务之间可以进行数据流传输。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="10-举例说明Flink程序开发的代码基本框架。"><a href="#10-举例说明Flink程序开发的代码基本框架。" class="headerlink" title="10 举例说明Flink程序开发的代码基本框架。"></a>10 举例说明Flink程序开发的代码基本框架。</h2></blockquote>
<h3 id="Flink程序开发的代码基本框架："><a href="#Flink程序开发的代码基本框架：" class="headerlink" title="Flink程序开发的代码基本框架："></a>Flink程序开发的代码基本框架：</h3><ol>
<li>获取执行环境；</li>
<li>加载或者创建初始数据；</li>
<li>指定对该数据的转换；</li>
<li>指定结果的存储位置；</li>
<li>触发程序执行。</li>
</ol>
<br>

<br>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/24/大数据架构作业-简答题7/" data-id="ckigrcuxw001j2kujwzmfcqld" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-MySQL的安装指南以及常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/20/MySQL的安装指南以及常用命令/" class="article-date">
  <time datetime="2020-11-20T06:37:42.000Z" itemprop="datePublished">2020-11-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/20/MySQL的安装指南以及常用命令/">关于CentOS下MySQL的安装指南以及常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>上周学习了如何使用Spring Boot编写一个登录注册系统，采用了<code>MySQL</code>作为数据库。</em></p>
<p>下面来记录一下，如何在<code>centOS</code>上安装<code>MySQL</code>以及<code>MySQL</code>的常用命令。</p>
<br>

<br>

<h2 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h2><p>我参考的是掘金上的<a href="https://juejin.cn/post/6844903870053761037#heading-16" target="_blank" rel="noopener">这篇文章</a>。</p>
<p>简要总结一下，关于<code>MySQL</code>在<code>centOS</code>上的安装，主要有四种方法。分别为yum安装法、rpm包安装法，直接解压tar包法和源码安装法。作者对于每种安装方法都进行了详细的讲解，这里我就不复制粘贴了。</p>
<p>我采用的是看上去比较省事的rpm包安装法。</p>
<br>

<br>

<h2 id="关于MySQL的常用命令"><a href="#关于MySQL的常用命令" class="headerlink" title="关于MySQL的常用命令"></a>关于MySQL的常用命令</h2><p>下面记录一下<code>MySQL</code>的常用命令，方便下一次使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 启动</span><br><span class="line">sudo systemctl start mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看状态</span><br><span class="line">sudo systemctl status mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 停止</span><br><span class="line">sudo systemctl stop mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 重启</span><br><span class="line">sudo systemctl restart mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 进入数据库</span><br><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<br>

<p>进入数据库之后，在MySQL-shell中常用的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查看使用的端口</span><br><span class="line">show global variables like &apos;port&apos;;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p><code>MySQL</code>作为一款免费的关系数据库，是很多中小型业务首要考虑使用的数据库。但是随着当前互联网业务的不断发展壮大，关系型数据库已经不能支持很多大型项目的需求了。</p>
<p>作为大数据系的学生，尽管<code>MySQL</code>已经可以很好的支持个人开发的小型项目了，但是还是很有必要去学习一下现在很火的其它非关系型数据库，比如：<code>Redis</code>、<code>MangoDB</code>等等。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/20/MySQL的安装指南以及常用命令/" data-id="ckigrcuvx00042kujgbsbebui" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Nginx服务器的常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/18/Nginx服务器的常用命令/" class="article-date">
  <time datetime="2020-11-18T09:16:30.000Z" itemprop="datePublished">2020-11-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/18/Nginx服务器的常用命令/">Nginx服务器的常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>上次学习Spring Boot编写Hello World网页的时候用到了Nginx服务器，为了以后使用方便，记录一下Nginx的常用命令。</em></p>
<br>

<h3 id="Nginx的常用命令"><a href="#Nginx的常用命令" class="headerlink" title="Nginx的常用命令"></a>Nginx的常用命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 设置开机启动 </span><br><span class="line">$ sudo systemctl enable nginx </span><br><span class="line"></span><br><span class="line"># 启动 nginx 服务</span><br><span class="line">$ sudo service nginx start </span><br><span class="line"></span><br><span class="line"># 停止 nginx 服务</span><br><span class="line">$ sudo service nginx stop </span><br><span class="line"></span><br><span class="line"># 重启 nginx 服务</span><br><span class="line">$ sudo service nginx restart </span><br><span class="line"></span><br><span class="line"># 重新加载配置，一般是在修改过 nginx 配置文件时使用</span><br><span class="line">$ sudo service nginx reload </span><br><span class="line"></span><br><span class="line"># 查看Nginx运行状态</span><br><span class="line">$ sudo systemctl status nginx</span><br></pre></td></tr></table></figure>

<br>

<h3 id="配置文件位置"><a href="#配置文件位置" class="headerlink" title="配置文件位置"></a>配置文件位置</h3><p>使用yum安装的nginx，配置文件默认在/etc/nginx/nginx.conf。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改配置文件</span><br><span class="line">$ vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/18/Nginx服务器的常用命令/" data-id="ckigrcuvm00002kujvgfks4hq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用Spring-Boot-Spring-Security-Hibernate-Bootstrap-JSP-Spring-Data-JPA-MySQL实现的登陆注册系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/17/使用Spring-Boot-Spring-Security-Hibernate-Bootstrap-JSP-Spring-Data-JPA-MySQL实现的登陆注册系统/" class="article-date">
  <time datetime="2020-11-17T13:50:08.000Z" itemprop="datePublished">2020-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/17/使用Spring-Boot-Spring-Security-Hibernate-Bootstrap-JSP-Spring-Data-JPA-MySQL实现的登陆注册系统/">使用Spring Boot, Spring Security, Hibernate, Bootstrap, JSP, Spring Data JPA, MySQL实现的登陆注册系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="本周任务："><a href="#本周任务：" class="headerlink" title="本周任务："></a>本周任务：</h2><p>使用Spring Boot实现一个简单的用户登录系统，并且部署在服务器上。</p>
<br>

<br>

<h2 id="使用工具以及运行环境："><a href="#使用工具以及运行环境：" class="headerlink" title="使用工具以及运行环境："></a>使用工具以及运行环境：</h2><ol>
<li>Spring Boot</li>
<li>Spring Security</li>
<li>Spring Data JPA</li>
<li>Hibernate</li>
<li>JDK 8</li>
<li>Maven 3.6.3</li>
<li>MySQL Server 5.7</li>
<li>Bootstrap</li>
<li>JSP</li>
<li>IDEA</li>
</ol>
<p><br><br></p>
<h2 id="文件目录树："><a href="#文件目录树：" class="headerlink" title="文件目录树："></a>文件目录树：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">│  pom.xml</span><br><span class="line">│  </span><br><span class="line">└─src</span><br><span class="line">    └─main</span><br><span class="line">        ├─java</span><br><span class="line">        │  └─com</span><br><span class="line">        │      └─yysy</span><br><span class="line">        │          └─auth</span><br><span class="line">        │              │  WebApplication.java</span><br><span class="line">        │              │  WebSecurityConfig.java</span><br><span class="line">        │              │  </span><br><span class="line">        │              ├─model</span><br><span class="line">        │              │      Role.java</span><br><span class="line">        │              │      User.java</span><br><span class="line">        │              │      </span><br><span class="line">        │              ├─repository</span><br><span class="line">        │              │      RoleRepository.java</span><br><span class="line">        │              │      UserRepository.java</span><br><span class="line">        │              │      </span><br><span class="line">        │              ├─service</span><br><span class="line">        │              │      SecurityService.java</span><br><span class="line">        │              │      SecurityServiceImpl.java</span><br><span class="line">        │              │      UserDetailsServiceImpl.java</span><br><span class="line">        │              │      UserService.java</span><br><span class="line">        │              │      UserServiceImpl.java</span><br><span class="line">        │              │      </span><br><span class="line">        │              ├─validator</span><br><span class="line">        │              │      UserValidator.java</span><br><span class="line">        │              │      </span><br><span class="line">        │              └─web</span><br><span class="line">        │                      UserController.java</span><br><span class="line">        │                      </span><br><span class="line">        ├─resources</span><br><span class="line">        │      application.properties</span><br><span class="line">        │      validation.properties</span><br><span class="line">        │      </span><br><span class="line">        └─webapp</span><br><span class="line">            │  login.jsp</span><br><span class="line">            │  registration.jsp</span><br><span class="line">            │  welcome.jsp</span><br><span class="line">            │  </span><br><span class="line">            └─resources</span><br><span class="line">                ├─css</span><br><span class="line">                │      bootstrap.min.css</span><br><span class="line">                │      common.css</span><br><span class="line">                │      </span><br><span class="line">                └─js</span><br><span class="line">                        bootstrap.min.js</span><br></pre></td></tr></table></figure>

<br>

<br>

<h2 id="实现步骤："><a href="#实现步骤：" class="headerlink" title="实现步骤："></a>实现步骤：</h2><ol>
<li>使用Maven新建一个项目，也可以使用spring initializr等工具生成项目。</li>
<li>配置项目依赖，修改pom.xml文件，添加上述的各种依赖。</li>
<li>定义JPA和Hibernate的实体，编写<code>User.java</code>和<code>Role.java</code>，这里属于DAO模式的Model层。</li>
<li>编写Spring Data JPA仓库，编写<code>UserRepository.java</code>和<code>RoleRepository.java</code>，实现DAO模式的接口层。</li>
<li>编写几个Service类，实现用户验证功能。<ol>
<li>编写<code>UserDetailsServiceImpl.java</code>，实现Spring Security中的<code>UserDetailsService</code>接口，下面的<code>SecurityServiceImpl</code>会用到；</li>
<li>编写<code>SecurityService</code>接口以及实现类，主要实现用户的身份验证，即实现用户的登陆功能；</li>
<li>编写<code>UserService</code>接口类以及实现类，主要实现用户的注册功能；</li>
</ol>
</li>
<li>编写<code>UserValidator</code>类，用于注册表单信息的校验；<ol>
<li>主要实现的校验有：<ol>
<li>用户名长度不符合规范</li>
<li>用户名已被使用</li>
<li>用户密码太短</li>
<li>用户密码二次输入错误（二次输入是为了注册时确认密码）</li>
</ol>
</li>
<li>校验的错误信息可以在<code>validation.properties</code>中定义；</li>
<li><code>Validator</code>从<code>Spring.validation</code>导入，已实现了很多常用方法；</li>
<li>登录页面的的错误比较单一，可以直接在Controller中定义；</li>
</ol>
</li>
<li>编写<code>WebController.java</code>，处理各种url请求的响应；</li>
<li>使用Bootstrap编写登录、注册和欢迎的JSP页面；</li>
<li>编写properties文件，包括上面提到的<code>validation.properties</code>和<code>application.properties</code>。<ol>
<li>validation定义注册表单报错的具体信息</li>
<li>application指定的属性如下：<ol>
<li>指定数据库的来源</li>
<li>指定JPA、Hibernate的选项</li>
<li>指定mvc的一些选项，以及监听端口等等</li>
</ol>
</li>
</ol>
</li>
<li>编写<code>WebSecurityConfig.java</code>，其中定义了受保护的页面以及需要的角色。</li>
</ol>
<br>

<h2 id="踩到的坑："><a href="#踩到的坑：" class="headerlink" title="踩到的坑："></a>踩到的坑：</h2><ol>
<li><h3 id="下载Maven配置到IDEA，项目使用Maven下载依赖包速度很慢。"><a href="#下载Maven配置到IDEA，项目使用Maven下载依赖包速度很慢。" class="headerlink" title="下载Maven配置到IDEA，项目使用Maven下载依赖包速度很慢。"></a>下载Maven配置到IDEA，项目使用Maven下载依赖包速度很慢。</h3><p>下载Maven之后，还要修改<code>Setting.xml</code>，添加国内的镜像。（<a href="https://blog.csdn.net/Hello_World_QWP/article/details/82459915" target="_blank" rel="noopener">Maven镜像配置参考</a>）</p>
<br>
</li>
<li><h3 id="application-properties中指定的DataSource无法访问。"><a href="#application-properties中指定的DataSource无法访问。" class="headerlink" title="application.properties中指定的DataSource无法访问。"></a><code>application.properties</code>中指定的<code>DataSource</code>无法访问。</h3><p><code>spring.datasource.url</code>可以指定使用数据库的地址，有时候会遇到数据库的时区和应用的时区不同步的问题；</p>
<p>需要使用相关参数指明时区</p>
<p>使用参数<code>serverTimezone=UTC</code>，规定时区为世界标准时间</p>
<p>参数与参数之间使用<code>&amp;</code>符号进行连接</p>
<br>
</li>
<li><h3 id="JSP中文乱码问题"><a href="#JSP中文乱码问题" class="headerlink" title="JSP中文乱码问题"></a>JSP中文乱码问题</h3><p>JSP是一个java文件，当应用在JVM中运行的时候需要被编译，如果在jsp文件中写了中文，就需要事先指定；</p>
<p>否则，jsp被编译之后会直接乱码，编码说明代码如下（指定jsp文件使用utf-8编码）</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html; charset=utf-8"</span>%&gt;</span><br></pre></td></tr></table></figure>

<p><a href="https://www.cnblogs.com/chengkai/articles/2171848.html" target="_blank" rel="noopener">参考博客</a>。</p>
<br>
</li>
<li><h3 id="项目在IDEA可以运行，达成jar包之后页面404了"><a href="#项目在IDEA可以运行，达成jar包之后页面404了" class="headerlink" title="项目在IDEA可以运行，达成jar包之后页面404了"></a>项目在IDEA可以运行，达成jar包之后页面404了</h3><p>这是因为maven没有把<code>jsp</code>等静态资源打包进jar包，需要在<code>pom</code>文件的<code>build</code>中，指定项目所需静态文件的存储位置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/webapp<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--这里必须是META-INF/resources--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span>META-INF/resources<span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/**<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/**<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 404解决方案之一 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，使用的spring-boot-maven版本好像只能为1.4.2，否则无法正常把文件打包进去。</p>
<br>
</li>
<li><h3 id="jar包部署到服务器之后，访问页面不知道为什么一直加载不出来（这个是个大坑）"><a href="#jar包部署到服务器之后，访问页面不知道为什么一直加载不出来（这个是个大坑）" class="headerlink" title="jar包部署到服务器之后，访问页面不知道为什么一直加载不出来（这个是个大坑）"></a>jar包部署到服务器之后，访问页面不知道为什么一直加载不出来（这个是个大坑）</h3><p><em>Linux使用<code>NativePRNG</code>算法生成<code>SecureRandom</code>，如果调用<code>generateSeed()</code>方法，这个方法会读取Linux系统的<code>/dev/random</code>文件，这个文件在<code>JAVA_HOME/jre/lib/securiy/java.security</code>里面有默认定义。而<code>/dev/random</code>文件是动态生成的，如果没有数据，就会阻塞！</em></p>
<h4 id="个人猜测："><a href="#个人猜测：" class="headerlink" title="个人猜测："></a>个人猜测：</h4><p>​    由于使用<code>SpringSecurity</code>需要生成随机数，进而JVM调用了<code>/dev/random</code>没有结果，于是发生阻塞，毕竟同样的问题在Win下没有出现。</p>
<h4 id="把JAVA-HOME-jre-lib-securiy-java-security中的securerandom改为urandom即可解决问题！"><a href="#把JAVA-HOME-jre-lib-securiy-java-security中的securerandom改为urandom即可解决问题！" class="headerlink" title="把JAVA_HOME/jre/lib/securiy/java.security中的securerandom改为urandom即可解决问题！"></a>把<code>JAVA_HOME/jre/lib/securiy/java.security</code>中的<code>securerandom</code>改为<code>urandom</code>即可解决问题！</h4><p><a href="https://www.cnblogs.com/it-deepinmind/p/13344558.html" target="_blank" rel="noopener">参考博客</a></p>
</li>
</ol>
<br>

<br>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>本次项目学习主要参考了<a href="https://hellokoding.com/registration-and-login-example-with-spring-security-spring-boot-spring-data-jpa-hsql-jsp/" target="_blank" rel="noopener">这篇文章</a>作为学习示例。</p>
<p>读示例项目源码的过程中，学习到了一个Spring Boot项目该有的体系结构和开发流程。</p>
<p>特别是认识到了Spring Security的强大功能，后面还会继续学习记录Spring Security的相关内容。</p>
<p>另外，这次学习没有好好看hibernate框架，后面也要抽时间好好补课，希望不会鸽掉。</p>
<p>Spring Validation提供了常用的用户校验功能，但是hibernate validation似乎能够实现效果更好的自定义校验功能，希望今后有机会可以学习学习。</p>
<p>另另外，这个项目还是使用比较陈旧的jsp文件，编写前端页面，似乎也引发了不少问题。今后学习Spring Boot项目，还是应该首要考虑thymeleaf作为前端框架。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/17/使用Spring-Boot-Spring-Security-Hibernate-Bootstrap-JSP-Spring-Data-JPA-MySQL实现的登陆注册系统/" data-id="ckigrcuw8000b2kujpvbsp0ob" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-关于DAO模式的小记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/17/关于DAO模式的小记录/" class="article-date">
  <time datetime="2020-11-17T13:34:09.000Z" itemprop="datePublished">2020-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/17/关于DAO模式的小记录/">关于DAO模式的小记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上周学习SpringBoot编写用户登录系统，提到了DAO模式。</p>
<br>

<p>于是网上找了一下<strong>具体概念</strong>：</p>
<blockquote>
<p>Data Access Object Pattern or DAO pattern is used to separate low level data accessing API or operations from high level business services. Following are the participants in Data Access Object Pattern.</p>
<ul>
<li><strong>Data Access Object Interface</strong> - This interface defines the standard operations to be performed on a model object(s).</li>
<li><strong>Data Access Object concrete class</strong> - This class implements above interface. This class is responsible to get data from a data source which can be database / xml or any other storage mechanism.</li>
<li><strong>Model Object or Value Object</strong> - This object is simple POJO containing get/set methods to store data retrieved using DAO class.</li>
</ul>
</blockquote>
<br>

<p><em>渣渣翻译一下</em>：</p>
<p><strong>DAO模式用于应用的数据操作，实现了底层数据操作和高层业务的分离。</strong></p>
<br>

<p>它分为以下三个组成部分：</p>
<ol>
<li><strong>DAO接口</strong> - 定义了对于底层模式对象应该有的规范化操作；</li>
<li><strong>DAO实体类</strong> - 具体实现DAO接口里面定义的操作，<strong>负责从数据库或其它形式的数据存储中读取数据</strong>；</li>
<li><strong>Model模式对象</strong> - 这是一个简单的<strong>POJO</strong>(<strong>Plain Old Java Object</strong>，持久化类)，用于定义需要存储的数据的格式。这个类里面，有许多<strong>get/set方法</strong>，这些方法使用DAO实体类，实现对应数据的存储和修改。</li>
</ol>
<br>

<p>关于上述引用的具体内容，可以看看<a href="https://www.tutorialspoint.com/design_pattern/data_access_object_pattern.htm" target="_blank" rel="noopener">这个网页</a>。</p>
<br>

<p><strong>小结：</strong></p>
<p>DAO模式是一种将底层数据结构和高层数据操作描述分离的设计模式。</p>
<p>通过使用该模式，可以简化用户开发难度，分层进行应用开发。</p>
<p>用户可以从底层的数据存储解放出来（直接定义POJO），从而更加专注于业务需要的数据操作的具体实现上（编写DAO实体类）。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/17/关于DAO模式的小记录/" data-id="ckigrcuwr000s2kuj94j1ybwm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-大数据架构作业-简答题6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/16/大数据架构作业-简答题6/" class="article-date">
  <time datetime="2020-11-16T07:19:44.000Z" itemprop="datePublished">2020-11-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/16/大数据架构作业-简答题6/">大数据架构作业-简答题6</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>第六次作业又快截止了，DDL驱动的课程作业…</em></p>
<br>

<blockquote>
<h2 id="1-简述大数据处理的三类场景，说明Spark对这三类典型场景的支持。"><a href="#1-简述大数据处理的三类场景，说明Spark对这三类典型场景的支持。" class="headerlink" title="1 简述大数据处理的三类场景，说明Spark对这三类典型场景的支持。"></a>1 简述大数据处理的三类场景，说明Spark对这三类典型场景的支持。</h2></blockquote>
<h3 id="大数据处理的三类场景："><a href="#大数据处理的三类场景：" class="headerlink" title="大数据处理的三类场景："></a>大数据处理的三类场景：</h3><ol>
<li>复杂的批量数据处理；</li>
<li>基于历史数据的交互式查询；</li>
<li>基于实时数据流的数据处理。</li>
</ol>
<br>

<h3 id="Spark对于以上三类场景的支持："><a href="#Spark对于以上三类场景的支持：" class="headerlink" title="Spark对于以上三类场景的支持："></a>Spark对于以上三类场景的支持：</h3><ol>
<li>对于小时级的复杂批量数据处理，可以把批量数据，以有限数据流的形式，使用Spark进行计算处理；</li>
<li>对于分钟级和秒级的已与历史数据的交互式查询，可以使用Spark SQL组件；</li>
<li>对于毫秒级基于实时数据流的数据处理，可以使用Spark Streaming组件。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="2-简要陈述Spark的运行架构和基本流程。"><a href="#2-简要陈述Spark的运行架构和基本流程。" class="headerlink" title="2 简要陈述Spark的运行架构和基本流程。"></a>2 简要陈述Spark的运行架构和基本流程。</h2></blockquote>
<h3 id="Spark运行架构包括："><a href="#Spark运行架构包括：" class="headerlink" title="Spark运行架构包括："></a>Spark运行架构包括：</h3><ol>
<li>集群资源管理器（Cluster Manager）；</li>
<li>运行作业任务的工作节点（Worker Node）；</li>
<li>每个应用的任务控制节点（Driver）；</li>
<li>工作节点上负责具体任务的执行进程（Executor）。</li>
</ol>
<br>

<h3 id="Spark运行基本流程："><a href="#Spark运行基本流程：" class="headerlink" title="Spark运行基本流程："></a>Spark运行基本流程：</h3><ol>
<li>由Driver创建一个SparkContext，进行资源申请、任务分配和监控，为应用构建基本运行环境；</li>
<li>资源管理为Executor分配资源，启动Executor进程；</li>
<li>由SparkContext根据RDD的依赖关系构建DAG图，进而DAGScheduler可以将DAG图解析成Stage，然后就可以根据Stage把TaskSet交给TaskScheduler；</li>
<li>Executor向SparkContext申请Task，TaskScheduler将Task发放给Executor运行，并且提供应用程序代码；</li>
<li>Task在Executor上运行，把执行结果反馈给TaskScheduler，然后反馈给DAGScheduler，运行完毕写入数据并释放所有资源。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="3-简要说明Spark中“stage”的概念及其划分方法。"><a href="#3-简要说明Spark中“stage”的概念及其划分方法。" class="headerlink" title="3 简要说明Spark中“stage”的概念及其划分方法。"></a>3 简要说明Spark中“stage”的概念及其划分方法。</h2></blockquote>
<h3 id="Spark中Stage的概念："><a href="#Spark中Stage的概念：" class="headerlink" title="Spark中Stage的概念："></a>Spark中Stage的概念：</h3><p>Stage是Job的基本调度单位。一个Job可分为多组Task，每一组Task被称为一个Stage或者TaskSet。任务集包含的各项任务之间，相互关联但是没有Shuffle依赖。</p>
<br>

<h3 id="Stage的划分方法："><a href="#Stage的划分方法：" class="headerlink" title="Stage的划分方法："></a>Stage的划分方法：</h3><ol>
<li>DAGScheduler在DAG进行反向解析，遇到宽依赖就断开；</li>
<li>解析过程中，遇到窄依赖就把当前的包含的RDD加入到Stage中；</li>
<li>将窄依赖进项划分到同一个Stage中，以便实现流水线计算。</li>
</ol>
<br>

<h3 id="关于宽依赖和窄依赖："><a href="#关于宽依赖和窄依赖：" class="headerlink" title="关于宽依赖和窄依赖："></a>关于宽依赖和窄依赖：</h3><ol>
<li>宽依赖表现为，一个父RDD的单个分区映射到一个子RDD的多个分区；</li>
<li>窄依赖表现为，一个父RDD的单个分区映射到一个子RDD的单个分组，或者多个父RDD的单个分区映射到一个子RDD的单个分区。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="4-Spark部署在YARN集群上，运行程序有两种模式，请简要叙述。"><a href="#4-Spark部署在YARN集群上，运行程序有两种模式，请简要叙述。" class="headerlink" title="4 Spark部署在YARN集群上，运行程序有两种模式，请简要叙述。"></a>4 Spark部署在YARN集群上，运行程序有两种模式，请简要叙述。</h2></blockquote>
<h3 id="Spark-on-YARN运行程序有两种模式："><a href="#Spark-on-YARN运行程序有两种模式：" class="headerlink" title="Spark on YARN运行程序有两种模式："></a>Spark on YARN运行程序有两种模式：</h3><ol>
<li>Client模式，Spark的Driver运行在客户端中，程序执行期间客户端不能关闭，否则作业会挂掉，主要用于测试环境；</li>
<li>Cluster模式，Spard的Driver运行在Yarn集群上的ApplicationMaster中，可以在应用程序启动后关闭，多用于实际生产环境。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/16/大数据架构作业-简答题6/" data-id="ckigrcux300182kujkm2a2jr1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-大数据架构作业-简答题5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/12/大数据架构作业-简答题5/" class="article-date">
  <time datetime="2020-11-12T08:17:20.000Z" itemprop="datePublished">2020-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/12/大数据架构作业-简答题5/">大数据架构作业-简答题5</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>大数据架构技术，超星第五次作业。</em></p>
<br>

<blockquote>
<h2 id="一、简要说明Hadoop的三大核心组件及其作用。"><a href="#一、简要说明Hadoop的三大核心组件及其作用。" class="headerlink" title="一、简要说明Hadoop的三大核心组件及其作用。"></a>一、简要说明Hadoop的三大核心组件及其作用。</h2></blockquote>
<h4 id="Hadoop的核心组件："><a href="#Hadoop的核心组件：" class="headerlink" title="Hadoop的核心组件："></a>Hadoop的核心组件：</h4><p>分布式文件系统HDFS、分布式计算框架MapReduce和资源调度框架Yarn。</p>
<h4 id="Hadoop各核心组件的作用："><a href="#Hadoop各核心组件的作用：" class="headerlink" title="Hadoop各核心组件的作用："></a>Hadoop各核心组件的作用：</h4><ol>
<li><p>HDFS分布式文件系统把文件分布式存储到多个计算机节点上，再由成千上万的计算机节点构成分布式存储集群。<strong>HDFS实现了如下目标：</strong></p>
<ol>
<li>兼容廉价的硬件设备；</li>
<li>流数据读写；</li>
<li>大数据集，高可扩展性；</li>
<li>简单的文件模型；</li>
<li>强大的跨平台兼容性</li>
</ol>
</li>
<li><p>YARN框架提供资源管理与调度服务。YARN部署在集群中，为集群的各种计算框架提供统一的资源调度管理服务，并且根据各种计算框架的负载需求，调整各自占用的资源，实现集群资源共享和资源弹性收缩。同时，YARN实现了一个集群上不同应用负载混搭，有效提高了集群的利用率。另外，在YARN框架中，不同计算框架可以共享底层存储，避免了数据集跨集群移动。</p>
</li>
<li><p>MapReduce将大规模集群上的并行计算过程抽象为两个函数Map和Reduce。使程序员无需要掌握分布式并行编程的繁琐细节，即可把自己的程序运行在 分布式系统上，实现海量数据的计算。</p>
</li>
</ol>
<br>

<blockquote>
<h2 id="二、简要说明HDFS的体系结构的组成、副本存储策略以及数据读写过程。"><a href="#二、简要说明HDFS的体系结构的组成、副本存储策略以及数据读写过程。" class="headerlink" title="二、简要说明HDFS的体系结构的组成、副本存储策略以及数据读写过程。"></a>二、简要说明HDFS的体系结构的组成、副本存储策略以及数据读写过程。</h2></blockquote>
<h4 id="HDFS的体系结构组成："><a href="#HDFS的体系结构组成：" class="headerlink" title="HDFS的体系结构组成："></a>HDFS的体系结构组成：</h4><ol>
<li>主节点(Master Node)，或者“名称结点”(NameNode)</li>
<li>从节点(Slave Node)，或者“数据节点”(DataNode)</li>
</ol>
<h4 id="HDFS的副本存储策略："><a href="#HDFS的副本存储策略：" class="headerlink" title="HDFS的副本存储策略："></a>HDFS的副本存储策略：</h4><ol>
<li>HDFS将文件分成多个块，以块为存储单位（默认一个块128MB）。</li>
<li>HDFS采用多副本方式，对数据进行冗余存储，通常一个数据块的多个副本会被分布到不同的数据节点上。</li>
<li>HDFS的数据存放：第一个副本，放置在上传文件的数据节点；第二个副本，放置在与第一个副本不同的机架的节点上；第三个副本，与第一个副本相同机架的其他节点上；更多副本，随机节点。</li>
</ol>
<h4 id="HDFS数据读写过程："><a href="#HDFS数据读写过程：" class="headerlink" title="HDFS数据读写过程："></a>HDFS数据读写过程：</h4><ol>
<li><strong>HDFS读数据的过程：</strong><ol>
<li>客户端向DFS执行打开文件操作；</li>
<li>DFS向NameNode获取数据块信息；</li>
<li>客户端向DFS发送文件读取请求；</li>
<li>DFS向DataNode读取数据；</li>
<li>如果读取失败，DFS可能会再次向NameNode获取数据块信息；</li>
<li>如果读取失败，再次获取数据块信息之后，DFS再次向DataNode读取数据；</li>
<li>客户端使用完文件之后，向DFS发送关闭文件请求。</li>
</ol>
</li>
<li><strong>HDFS写数据的过程：</strong><ol>
<li>客户端向DFS发送创建文件请求；</li>
<li>DFS在NameNode创建文件元数据；</li>
<li>客户端在DFS写入数据；</li>
<li>DFS向DataNode写入数据包；</li>
<li>DataNode写入数据包之后，向DFS发送确认包；</li>
<li>客户端向DFS发送关闭文件请求；</li>
<li>DFS向NameNode通知写操作完成。</li>
</ol>
</li>
</ol>
<br>

<blockquote>
<h2 id="三、简要陈述MapReduce的体系结构组成和工作流程。"><a href="#三、简要陈述MapReduce的体系结构组成和工作流程。" class="headerlink" title="三、简要陈述MapReduce的体系结构组成和工作流程。"></a>三、简要陈述MapReduce的体系结构组成和工作流程。</h2></blockquote>
<h4 id="MapReduce的四个组成部分："><a href="#MapReduce的四个组成部分：" class="headerlink" title="MapReduce的四个组成部分："></a>MapReduce的四个组成部分：</h4><ol>
<li>Client：用户编写的MapReduce程序通过Client提交到JobTracker端；</li>
<li>JobTracker：JobTracker负责资源监控和作业调度；</li>
<li>TaskTracker：TaskTracker周期性地通过“心跳”将本节点上资源的使用情况和任务的运行进度汇报给JobTracker，同时接收JobTracker发送过来的命令并执行相应的操作；</li>
<li>Task：Task分为Map Task和Reduce Task，均由TaskTracker 启动。</li>
</ol>
<h4 id="MapReduce工作流程："><a href="#MapReduce工作流程：" class="headerlink" title="MapReduce工作流程："></a>MapReduce工作流程：</h4><p>分片（split）→本地计算（map） → 洗牌（shuffle） → 汇总计算（reduce）</p>
<h4 id="具体工作流程如下："><a href="#具体工作流程如下：" class="headerlink" title="具体工作流程如下："></a>具体工作流程如下：</h4><ol>
<li>划分MapReduce的基本处理单位split，将需要处理的数据分片；</li>
<li>Hadoop为每个split创建一个Map任务，Worker接收数据并且执行Map任务，并将执行结果写入缓存（Map）；</li>
<li>对写入缓存的数据进行溢写和文件归并等操作，把数据输入给Reduce任务（Shuffle）；</li>
<li>Reduce领取数据先放入缓存，来自不同Map机器，先归并，再合并，写入磁盘（Reduce）；</li>
<li>Map和Reduce阶段相互衔接，Shuffle阶段包含在两者之间。</li>
</ol>
<br>

<blockquote>
<h2 id="四、简要陈述YARN体系结构组成、各部分的功能及工作流程。"><a href="#四、简要陈述YARN体系结构组成、各部分的功能及工作流程。" class="headerlink" title="四、简要陈述YARN体系结构组成、各部分的功能及工作流程。"></a>四、简要陈述YARN体系结构组成、各部分的功能及工作流程。</h2></blockquote>
<h4 id="YARN体系结构组成："><a href="#YARN体系结构组成：" class="headerlink" title="YARN体系结构组成："></a>YARN体系结构组成：</h4><ol>
<li>ResourceManager（RM）：全局资源管理器，负责整个系统的资源管理和分配。包括两个组件：调度器 （Scheduler）和应用程序管理器（Applications Manager）；</li>
<li>NodeManager是驻留在YARN集群中的每个节点上的代理；</li>
<li>JobHistoryServer：统一管理YARN历史任务。</li>
<li>WebAppProxyServer： 任务执行时的Web页面代理。</li>
</ol>
<h4 id="YARN工作流程："><a href="#YARN工作流程：" class="headerlink" title="YARN工作流程："></a>YARN工作流程：</h4><ol>
<li>用户编写客户端应用程序并向YARN提交，提交内容包括ApplicationMaster程序、 启动ApplicationMaster的命令、用户程序等；</li>
<li>YARN中的ResourceManager负责接收和处理来自客户端的请求，为应用程序分 配一个容器，在该容器中启动一个ApplicationMaster；</li>
<li>ApplicationMaster被创建后会首先向ResourceManager注册；</li>
<li>ApplicationMaster采用轮询的方式向ResourceManager申请资源；</li>
<li>ResourceManager以“容器”的形式向 提出申请的ApplicationMaster分配资源；</li>
<li>在容器中启动任务（运行环境、脚本）；</li>
<li>各个任务向ApplicationMaster汇报自己的状态和进度；</li>
<li>应用程序运行完成后，ApplicationMaster向ResourceManager的应用程序管理器注销并关闭自己。</li>
</ol>
<br>

<blockquote>
<h2 id="五、说明在Hadoop计算框架下进行程序开发的主要过程。"><a href="#五、说明在Hadoop计算框架下进行程序开发的主要过程。" class="headerlink" title="五、说明在Hadoop计算框架下进行程序开发的主要过程。"></a>五、说明在Hadoop计算框架下进行程序开发的主要过程。</h2></blockquote>
<h4 id="开发流程："><a href="#开发流程：" class="headerlink" title="开发流程："></a>开发流程：</h4><ol>
<li>使用 Maven 创建项目</li>
<li>检查项目的目录结构</li>
<li>将项目导入IDE</li>
<li>配置Hadoop依赖</li>
<li>编写应用逻辑代码</li>
<li>Maven构建/编译项目</li>
<li>提交集群运行程序</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/12/大数据架构作业-简答题5/" data-id="ckigrcux5001a2kuj1nonjsya" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其它/">其它</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程语言入门/">编程语言入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/其它/" style="font-size: 10px;">其它</a> <a href="/tags/后端/" style="font-size: 20px;">后端</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/编程语言入门/" style="font-size: 15px;">编程语言入门</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/课程作业/" style="font-size: 17.5px;">课程作业</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/">解决无法使用Pycharm自带的pip安装第三方库的问题</a>
          </li>
        
          <li>
            <a href="/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/">使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据</a>
          </li>
        
          <li>
            <a href="/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/">关于Spring Security文档上密码发展史的阅读报告</a>
          </li>
        
          <li>
            <a href="/2020/11/24/大数据架构作业-简答题7/">大数据架构作业-简答题7</a>
          </li>
        
          <li>
            <a href="/2020/11/20/MySQL的安装指南以及常用命令/">关于CentOS下MySQL的安装指南以及常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Miaopashi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>