<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>MPS的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="MPS的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="MPS的个人博客">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MPS的个人博客">
  
    <link rel="alternate" href="/atom.xml" title="MPS的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MPS的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-使用js和后端模糊查询实现搜索提示功能" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/27/使用js和后端模糊查询实现搜索提示功能/" class="article-date">
  <time datetime="2021-04-27T07:45:44.000Z" itemprop="datePublished">2021-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/27/使用js和后端模糊查询实现搜索提示功能/">使用js和后端模糊查询实现搜索提示功能</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h2><p><em>最近毕节市煤矿预警平台第一阶段完成了，趁着这段时间记录一下前面学习的东西。这次记录的是，根据用户的输入，匹配煤矿名称候选项的功能实现。前端用的技术有<code>jquery</code>、<code>bootstrap4</code>、<code>vue</code>、<code>html</code>自带的<code>datelist</code>标签，后端的技术有<code>mybatis</code>（其实后端没干啥就是做了一个模糊查找）。</em></p>
<br>

<h2 id="实现的逻辑："><a href="#实现的逻辑：" class="headerlink" title="实现的逻辑："></a>实现的逻辑：</h2><ol>
<li><p>当用户在输入框输入东西的时候，<strong>前端将输入框的内容发送给后端</strong>（这里用的是<code>ajax</code>发<code>get</code>请求）</p>
</li>
<li><p>后端根据用户输入和当前页面的县区（考虑到后端查询的效率，先将查询的范围缩小到某一个县区）进行<strong>模糊查找</strong>，查询结果返回前端</p>
</li>
<li><p>前端接受到后端的查询结果，将<strong>结果保存到<code>vue</code>组件的对应属性</strong>里面</p>
</li>
<li><p>使用<code>vue-for</code>循环，在前端的<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/datalist" target="_blank" rel="noopener"><code>datalist标签</code></a>里面输入返回结果，供用户选择</p>
</li>
</ol>
<br>

<h2 id="前端实现："><a href="#前端实现：" class="headerlink" title="前端实现："></a>前端实现：</h2><p>由上面的逻辑可见，前端需要响应用户输入，发送<code>ajax</code>请求，<code>vue-for</code>循环，这里一步一步来。</p>
<p>首先，相应用户输入。这里直接用<code>html</code>中<code>input</code>标签自带的<code>oninput</code>属性即可响应用户输入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"coalMineName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">list</span>=<span class="string">"coalMineNames"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">oninput</span>=<span class="string">"searchCoalMineName($('#coalMineName').val())"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">"coalMineNames"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">"n in coalMineNames"</span> <span class="attr">v-bind:value</span>=<span class="string">"n"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当input输入框检测到输入就将输入框中的内容传递给一个<code>searchCoalMineName</code>函数。注意到这里由一个<code>vue-for</code>循环是用来显示查询结果的，后面再进行说明</p>
<p>在<code>control.js</code>中编写<code>searchCoalMineName</code>函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">searchCoalMineName</span>(<span class="params">searchText</span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">'GET'</span>,</span><br><span class="line">        dataType: <span class="string">'JSON'</span>,</span><br><span class="line">        url: <span class="string">'/table/mine/find/coalMineName'</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            <span class="string">'province'</span>: getUrlParameter(<span class="string">'province'</span>),</span><br><span class="line">            <span class="string">'searchText'</span>: searchText</span><br><span class="line">        &#125;,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            inputInVue.coalMineNames = data;</span><br><span class="line">        &#125;,</span><br><span class="line">        error: <span class="function"><span class="keyword">function</span> (<span class="params">xhr, type, errorThrown</span>) </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的<code>getUrlParameter</code>函数是提取<code>url</code>中的参数，这里提取的就是县区名称，该函数的代码可以参照<a href="https://stackoverflow.com/questions/19491336/how-to-get-url-parameter-using-jquery-or-plain-javascript" target="_blank" rel="noopener">Stake Overflow</a>这里不详细展开</p>
<p><code>searchText</code>就是输入框的内容，通过<code>jquery</code>框架发送<code>ajax</code>请求到后端。将接收到的查询结果传递到<code>vue</code>容器的<code>coalMineNames</code>属性中</p>
<p><code>vue</code>容器会检测到容器的相关属性发生了变化，会自动更新模板的相关内容，比如上面的<code>vue-for</code>循环就会因为返回的查询结果的变化，开始自动更新<code>datalist标签</code>中的option，最后根据浏览器的实现，就会渲染成一个下来列表，不同浏览器的实现不同可能会有bug（貌似搜狗浏览器就出现了问题）</p>
<br>

<h2 id="后端实现："><a href="#后端实现：" class="headerlink" title="后端实现："></a>后端实现：</h2><p>这里使用了<code>SpringBoot</code>框架，所以先用一个<code>Controller</code>接收请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/find/coalMineName"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findCoalMineName</span><span class="params">(@RequestParam String province, @RequestParam String searchText)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!province.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (province.equals(<span class="string">"合计"</span>))</span><br><span class="line">            province = <span class="string">"%%"</span>;</span><br><span class="line">        <span class="keyword">return</span> coalMineMapper.findCoalMineNameByInput(<span class="string">"%"</span> + searchText + <span class="string">"%"</span>, province);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意到，对于合计字段不应该再限制县区名称，而是应该再所有县区之间搜索符合条件的煤矿名称，这里对县区名称也可以用一个模糊查询，当县区名称为‘合计’的时候，只要用<code>”%%“</code>正则表达式就可以查询所有的县区煤矿名称了</p>
<p><code>sql语句</code>中使用<code>LIKE</code>关键字配合正则表达式<code>”%查询条件%“</code>，允许查询条件前后出现若干个字符，以此实现模糊查询。<code>mybatis</code>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT CoalMineName FROM tbCoalMine WHERE CoalMineName LIKE #&#123;searchText&#125; AND Province LIKE #&#123;province&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;String&gt; <span class="title">findCoalMineNameByInput</span><span class="params">(@Param(<span class="string">"searchText"</span>)</span> String searchText, @<span class="title">Param</span><span class="params">(<span class="string">"province"</span>)</span> String province)</span>;</span><br></pre></td></tr></table></figure>

<p>由此即可根据用户输入进行模糊查询，返回候选结果</p>
<br>

<p>以上~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/04/27/使用js和后端模糊查询实现搜索提示功能/" data-id="cknzrcecj000r5wujqovoit19" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用Docker部署jar包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/27/使用Docker部署jar包/" class="article-date">
  <time datetime="2021-04-27T07:21:37.000Z" itemprop="datePublished">2021-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/27/使用Docker部署jar包/">使用Docker部署jar包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p><em>最近在用springBoot写毕节市煤矿预警的项目，上线之后又面临着多次修改，而且在实际部署到毕节市之前还要先部署到自己的服务器给老师先看看，挺麻烦的。每次部署都在在搜索引擎找小白教程，虽然来来去去去就那基本命令，但是不是每天都写确实进不了脑子，这里索性直接记下来。</em></p>
<br>

<h2 id="删除原来的镜像和容器"><a href="#删除原来的镜像和容器" class="headerlink" title="删除原来的镜像和容器"></a>删除原来的镜像和容器</h2><p>部署项目之前需要将原来运行的docker容器给关掉，容器开着一来占用服务器资源，二来占用了原来的端口（为了安全服务器防火墙是一个项目开一个端口）。下面直接贴上经常使用的docker相关命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">查看所有容器ID</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">停止指定的容器</span><br><span class="line">docker stop [容器id]</span><br><span class="line"></span><br><span class="line">删除指定的容器</span><br><span class="line">docker rm [容器id]</span><br><span class="line"></span><br><span class="line">查看所有image</span><br><span class="line">docker imaged</span><br><span class="line"></span><br><span class="line">删除docker镜像</span><br><span class="line">docker rmi [镜像ID]</span><br></pre></td></tr></table></figure>

<br>

<h2 id="部署jar包"><a href="#部署jar包" class="headerlink" title="部署jar包"></a>部署jar包</h2><p>删除了原来的容器和镜像之后，开始部署jar包。首先，将jar包放在某个项目目录里面，然后再目录内新建一个<code>Dockerfile</code>文件，后面docker就是根据这个文件的内容生成镜像的。</p>
<h3 id="Dockerfile文件内容参考如下"><a href="#Dockerfile文件内容参考如下" class="headerlink" title="Dockerfile文件内容参考如下"></a><code>Dockerfile</code>文件内容参考如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">MAINTAINER miaopashi</span><br><span class="line">ADD demo-0.0.1-SNAPSHOT.jar demo.jar</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;demo.jar&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="构建docker镜像"><a href="#构建docker镜像" class="headerlink" title="构建docker镜像"></a>构建docker镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t my/demo .</span><br></pre></td></tr></table></figure>

<h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name demo -p 8080:8080  my/demo</span><br></pre></td></tr></table></figure>

<p>说明：restart选项的内容表示docker容器在服务器开机之后会自动重启</p>
<br>

<p>以上~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/04/27/使用Docker部署jar包/" data-id="cknzrcec9000d5wuj5pyqgjx5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-毕节市可视化Java项目博客记录-日期格式的转换" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/15/毕节市可视化Java项目博客记录-日期格式的转换/" class="article-date">
  <time datetime="2021-04-15T03:20:01.000Z" itemprop="datePublished">2021-04-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/15/毕节市可视化Java项目博客记录-日期格式的转换/">毕节市可视化Java项目博客记录----日期格式的转换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>数据可视化中经常要使用日期作为查询条件或者展示内容，这需要前后端对时间进行转化，本篇的目的是记录我在本项目中使用的日期转换方法</em></p>
<br>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>后端虽然可以直接使用固定格式的字符串（如：”2021-12-12 11:11:11”）进行<code>sql</code>查询，但是为了保证时间的准确性（排除诸如不同时区对时间的影响），最好还是使用<code>Date</code>类型进行查询<br>另一方面，前端显示的时间格式一般为字符串（如：”2021-12-12 11:11:11”或”2021-12-12T11:11:11”，前者作为<strong>前端表格</strong>显示的时间结果并且可以直接作为<code>sql</code>查询条件，后者用于<code>h5</code>自带的<code>datetime</code>类型<code>Input</code>标签的<strong>时间显示</strong>）<br>这就导致后端需要对时间<strong>字符串</strong>和<strong><code>Date</code>类型变量</strong>进行转换，或者也可以把转换工作交给前端。在这个项目中，对于<strong>空格时间字符串</strong>在<strong>后端</strong>转化成<strong><code>Date</code>类型</strong>，对于<strong>T时间字符串</strong>则先在<strong>前端</strong>将其转化为<strong>空格时间字符串</strong>，后续会进行说明</p>
<p>顺便在后面可以讲一下，如何在浏览器使用一个h5新组件，实现日历框输入。但是这个组件目前在部分主流浏览器比如火狐浏览器是不支持的（所幸谷歌浏览器是支持的），后期考虑使用其他框架的日历输入框。</p>
<br>

<h2 id="Java中日期的格式化"><a href="#Java中日期的格式化" class="headerlink" title="Java中日期的格式化"></a>Java中日期的格式化</h2><p>Java中的日期格式化可以通过<code>DateFormat</code>类和<strong><code>SimpleDateFormat</code>类</strong>完成，后者可以指定相对随意的文本格式，所以这里使用后者进行日期格式转换</p>
<p>可以看到<code>SimpleDateFormat</code>构造方法的参数可以比较方便地指定时间字符串的样式，其中y表示面年份、M表示月份、d表示天数……<br><a href="http://c.biancheng.net/view/878.html" target="_blank" rel="noopener">http://c.biancheng.net/view/878.html</a><br>需要注意的一点是，由于参数规定了特殊字符对应具体的时间概念，所以会和时间字符串中的非时间字符产生歧义。比如：对于”2021-12-12T11:11:11”，如果想利用<code>SimpleDateFormat</code>转化为<code>Date</code>变量，调用构造方法<code>SimpleDateFormat(&quot;yyyy-MM-ddTHH:mm:ss&quot;)</code>，参数中的T会产生协议，当调用parse()方法的时候就会报错。这就是我在项目中把T时间字符串和空白字符串之间的转换留在前端的原因。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用SimpleDateFormat需要先生成一个对象</span></span><br><span class="line">SimpleDateFormat f = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"><span class="comment">// 调用这个对象的parse方法，可以根据空格时间字符串，生成Date变量</span></span><br><span class="line">Date startDate = f.parse(startTime);</span><br><span class="line"><span class="comment">// 调用这个对象的format方法，可以根据Date变量，生成指定格式的字符串</span></span><br><span class="line">SimpleDateFormat nf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"今天是yy-MM-dd"</span>);</span><br><span class="line">String today = nf.format(<span class="keyword">new</span> Date());</span><br></pre></td></tr></table></figure>

<p>可以看到<code>SimpleDateFormat()</code>构造方法的参数可以比较方便地<strong>指定时间字符串的样式</strong>，其中<code>y</code>表示面年份、<code>M</code>表示月份、<code>d</code>表示天数……</p>
<table>
<thead>
<tr>
<th>字母</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>y</td>
<td>年份。一般用 yy 表示两位年份，yyyy 表示 4 位年份</td>
<td>使用 yy 表示的年扮，如 11； 使用 yyyy 表示的年份，如 2011</td>
</tr>
<tr>
<td>M</td>
<td>月份。一般用 MM 表示月份，如果使用 MMM，则会 根据语言环境显示不同语言的月份</td>
<td>使用 MM 表示的月份，如 05； 使用 MMM 表示月份，在 Locale.CHINA 语言环境下，如“十月”；在 Locale.US 语言环境下，如 Oct</td>
</tr>
<tr>
<td>d</td>
<td>月份中的天数。一般用 dd 表示天数</td>
<td>使用 dd 表示的天数，如 10</td>
</tr>
<tr>
<td>D</td>
<td>年份中的天数。表示当天是当年的第几天， 用 D 表示</td>
<td>使用 D 表示的年份中的天数，如 295</td>
</tr>
<tr>
<td>E</td>
<td>星期几。用 E 表示，会根据语言环境的不同， 显示不 同语言的星期几</td>
<td>使用 E 表示星期几，在 Locale.CHINA 语 言环境下，如“星期四”；在 Locale.US 语 言环境下，如 Thu</td>
</tr>
<tr>
<td>H</td>
<td>一天中的小时数（0~23)。一般用 HH 表示小时数</td>
<td>使用 HH 表示的小时数，如 18</td>
</tr>
<tr>
<td>h</td>
<td>一天中的小时数（1~12)。一般使用 hh 表示小时数</td>
<td>使用 hh 表示的小时数，如 10 (注意 10 有 可能是 10 点，也可能是 22 点）</td>
</tr>
<tr>
<td>m</td>
<td>分钟数。一般使用 mm 表示分钟数</td>
<td>使用 mm 表示的分钟数，如 29</td>
</tr>
<tr>
<td>s</td>
<td>秒数。一般使用 ss 表示秒数</td>
<td>使用 ss 表示的秒数，如 38</td>
</tr>
<tr>
<td>S</td>
<td>毫秒数。一般使用 SSS 表示毫秒数</td>
<td>使用 SSS 表示的毫秒数，如 156</td>
</tr>
</tbody></table>
<p><em>表格来自：<a href="http://c.biancheng.net/view/878.html" target="_blank" rel="noopener">http://c.biancheng.net/view/878.html</a></em><br>需要注意的一点是，由于参数规定了<strong>特殊字符</strong>对应<strong>具体的时间概念</strong>，所以会和时间字符串中的<strong>非时间字符</strong>产生<strong>歧义</strong>。比如：对于”2021-12-12T11:11:11”，如果想利用<code>SimpleDateFormat</code>转化为<code>Date</code>变量，调用构造方法<code>SimpleDateFormat(&quot;yyyy-MM-ddTHH:mm:ss&quot;)</code>，参数中的<strong>“T”</strong>会产生歧义，当调用<code>parse()</code>方法的时候就会报错。这就是我在项目中把<strong>T时间字符串</strong>和<strong>空白字符串</strong>之间的转换，留在前端的原因。</p>
<br>

<h2 id="JavaScript中的字符串格式化"><a href="#JavaScript中的字符串格式化" class="headerlink" title="JavaScript中的字符串格式化"></a>JavaScript中的字符串格式化</h2><p>在上面遇到了<strong>T时间字符串</strong>的转化问题，这里选择了在前端把<strong>T字符串</strong>转为<strong>空格字符串</strong>，后端再由<strong>空格字符串</strong>转为<strong><code>Date</code>变量</strong>，或者直接进行<code>sql</code>查询。下面贴上前端的字符串转化的代码</p>
<p>通过指定<code>oldSign</code>和<code>newSign</code>，可以实现T字符串和空格字符串的转化（如T转空格则调用<code>getDateTimeString(originString, &#39;T&#39;, &#39; &#39;)</code>），当然这个代码是临时拼凑的所以写的不咋滴</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> getDateTimeString = <span class="function"><span class="keyword">function</span> <span class="title">getDateTimeString</span>(<span class="params">originString, oldSign, newSign</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在2021-11-11T00:00:00与2021-11-11 00:00:00之间相互转化</span></span><br><span class="line">    <span class="keyword">let</span> timeValues = originString.split(oldSign),</span><br><span class="line">        res = timeValues[<span class="number">0</span>] + newSign + timeValues[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (res !== <span class="string">" undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过指定<code>oldSign</code>和<code>newSign</code>，可以实现T字符串和空格字符串的转化（如<strong>T转空格</strong>则调用<code>getDateTimeString(originString, &#39;T&#39;, &#39; &#39;)</code>），当然这个代码是临时拼凑的所以写的不咋滴</p>
<br>

<h2 id="使用html-lt-input-type-quot-datetime-local-quot-gt-标签实现日历框输入"><a href="#使用html-lt-input-type-quot-datetime-local-quot-gt-标签实现日历框输入" class="headerlink" title="使用html&lt;input type=&quot;datetime-local&quot;&gt;标签实现日历框输入"></a>使用html<code>&lt;input type=&quot;datetime-local&quot;&gt;</code>标签实现日历框输入</h2><p>在html5中可以指定input标签的type为datatime-local，使得input输入框使用<code>--年--月--日 xx:xx:xx</code>的日期格式，以日历框的形式进行日历输入。</p>
<p>但是这个特性在部分浏览器，比如火狐浏览器，是没有实现的。所幸谷歌浏览器对这个特性有一个比较好看的实现，考虑到谷歌浏览器的使用率比较高，最后还是选择了这个组件。</p>
<p>有点奇怪的是，火狐浏览器的项目基金会mozilla对这个html特性进行了<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime-local" target="_blank" rel="noopener">非常详细的介绍</a>，尽管火狐浏览器并不支持它😂</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group mb-3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group-prepend"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"input-group-text"</span> <span class="attr">for</span>=<span class="string">"startTime"</span>&gt;</span>开始时间<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"startTime"</span> <span class="attr">type</span>=<span class="string">"datetime-local"</span> <span class="attr">step</span>=<span class="string">"01"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，这里的value格式要遵循<code>年/月/日Txx:xx:xx</code>的格式，否则value值会失效。另外这里为了显示效果，使用了<code>bootstrap4</code>进行部分装点，核心的<code>datetime</code>还是<code>html5</code>的组件</p>
<br>

<p><em>以上~</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/04/15/毕节市可视化Java项目博客记录-日期格式的转换/" data-id="cknzrceda001y5wujmxkisfo5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/项目/">项目</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-工作室技术分享会" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/08/工作室技术分享会/" class="article-date">
  <time datetime="2021-04-08T01:39:27.000Z" itemprop="datePublished">2021-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/08/工作室技术分享会/">工作室技术分享会</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="基础知识："><a href="#基础知识：" class="headerlink" title="基础知识："></a>基础知识：</h2><p>html、css、js的基本概念，可以参照w3school学习使用方法</p>
<h2 id="echarts简介："><a href="#echarts简介：" class="headerlink" title="echarts简介："></a>echarts简介：</h2><p>使用 <strong>JavaScript</strong> 实现的开源可视化库</p>
<p>提供常规的<strong>折线图、柱状图、散点图、饼图、K线图</strong>，用于统计的<strong>盒形图</strong>，用于地理数据可视化的<strong>地图、热力图、线图</strong>，用于关系数据可视化的<strong>关系图、treemap、旭日图</strong>，多维数据可视化的平行坐标，还有用于 BI 的<strong>漏斗图，仪表盘</strong>，并且支持图与图之间的混搭</p>
<p><em>详见<a href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener">echarts的官方文档</a></em></p>
<h2 id="简单上手绘制一个饼图页面："><a href="#简单上手绘制一个饼图页面：" class="headerlink" title="简单上手绘制一个饼图页面："></a>简单上手绘制一个饼图页面：</h2><p>框架：flask（后端）、<strong>echarts（前端）</strong></p>
<p>IDE：Pycharm</p>
<h3 id="上手步骤："><a href="#上手步骤：" class="headerlink" title="上手步骤："></a>上手步骤：</h3><ol>
<li><strong>下载echarts</strong>：从github下载编译产物</li>
<li>创建一个dom容器  id</li>
<li>echarts的使用步骤（大象冰箱）：<ol>
<li>初始化echart（init）—-打开冰箱</li>
<li><strong>编写option —-把大象推进去</strong></li>
<li>导入option到echarts对象（setOption） —-关上冰箱</li>
</ol>
</li>
<li>饼图的option使用了哪些配置（结合文档）</li>
</ol>
<h2 id="制作一个简单的大屏页面："><a href="#制作一个简单的大屏页面：" class="headerlink" title="制作一个简单的大屏页面："></a>制作一个简单的大屏页面：</h2><h3 id="目标："><a href="#目标：" class="headerlink" title="目标："></a>目标：</h3><p>六个图的大屏（饼图、柱状图、地图、折线图、条形图、折线图）</p>
<h3 id="制作步骤："><a href="#制作步骤：" class="headerlink" title="制作步骤："></a>制作步骤：</h3><ol>
<li><p>简单设计大屏，编写html中6个dom和css（记得引用）</p>
</li>
<li><p>新建js文件（Why？），结合实例或文档编写echarts代码，引用js到html</p>
</li>
<li><p>根据需求细化可视化组件的内容（颜色标题等）</p>
</li>
</ol>
<h3 id="关于地图可视化（地理坐标系）："><a href="#关于地图可视化（地理坐标系）：" class="headerlink" title="关于地图可视化（地理坐标系）："></a>关于地图可视化（地理坐标系）：</h3><ol>
<li>详见echarts中option的geo配置</li>
<li>推荐阿里的地图选择器下载Json</li>
<li>在echarts中通过<strong>registerMap</strong>方法注册地图</li>
<li>地图标点需要用到经纬度，实际业务中有时只有目标的地址，可以使用百度地图的api将<strong>地址转换为经纬度</strong></li>
<li>series中指定type为map，绘制功能更丰富的地图可视化组件</li>
</ol>
<h2 id="讲讲echarts的其它相关操作："><a href="#讲讲echarts的其它相关操作：" class="headerlink" title="讲讲echarts的其它相关操作："></a>讲讲echarts的其它相关操作：</h2><ol>
<li><p>事件响应（响应鼠标点击事件）</p>
</li>
<li><p>dom容器的隐藏与显示（可以实现类似弹出框的效果）</p>
</li>
<li><p>数据异步加载（ajax）</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/04/08/工作室技术分享会/" data-id="cknzrced6001r5wuj9vfvkwn9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-阿里云《Serverless云开发从入门到实战》学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/18/阿里云《Serverless云开发从入门到实战》学习笔记/" class="article-date">
  <time datetime="2020-12-18T10:16:39.000Z" itemprop="datePublished">2020-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/18/阿里云《Serverless云开发从入门到实战》学习笔记/">阿里云《Serverless云开发从入门到实战》学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近想学习一下项目部署的主流方式，比如Docker和Serverless。</p>
<p>前几天了解了一下Docker的基本概念和常用命令，能够把项目在服务器跑起来了。</p>
<p>所以现在计划了解一下Serverless，目标是使用Serverless部署之前写的小项目。</p>
<p>参考的文档是阿里云《Serverless云开发从入门到实战》</p>
<br>

<p>Serverless是一种构建和管理微服务架构的完整服务流程。是PaaS向Baas（后端即服务）和Faas（函数即服务）更小粒度的发展。它在无状态计算容器中运行，克重让使用者值关注自己的业务逻辑。如今微服务后端开发日益兴起，前端开始向全栈式开发转变，甚至出现了BFF(Backend  For Frontend)中台架构层。而使用Serverless技术，可以将后端代码快速、高效地部署，并且不需要再进行服务器管理，不仅省去了运维的成本，还为前端调用服务提供了更加便捷的接口。下Serverle架构下，使用者通过云平台进行开发，服务商会提供便利的部署服务，根据应用的访问情况自动完整项目服务器的漂移以及扩容。</p>
<br>

<p>\</p>
<br>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/18/阿里云《Serverless云开发从入门到实战》学习笔记/" data-id="cknzrced9001w5wujcghmxhlu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用DNS映射解决Github访问缓慢的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/09/使用DNS映射解决Github访问缓慢的问题/" class="article-date">
  <time datetime="2020-12-09T06:21:29.000Z" itemprop="datePublished">2020-12-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/09/使用DNS映射解决Github访问缓慢的问题/">使用DNS映射解决Github访问缓慢的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近访问Github的频率有点多，越来越发觉国内访问Github的速度太感人了，于是开始寻找解决方案。</p>
<p>然后在Github上看到了一个解决这个问题的<a href="https://github.com/521xueweihan/GitHub520" target="_blank" rel="noopener">项目</a>。</p>
<p>这项目会不定时地更新github的dns映射，只需要在需要访问github的时候，更新一下hosts文件，就可以利用dns映射，快速访问到github上的项目。</p>
<p>关于更新hosts文件，如果是手动更新，显然是难以接受的，于是该项目推荐了一个自动化更改hosts文件的软件，叫Switchhosts。</p>
<p>关于SwitchHosts的安装下载可以参照<a href="https://github.com/oldj/SwitchHosts/blob/master/README_cn.md" target="_blank" rel="noopener">这里</a>。</p>
<p>一开始是想使用scoop安装的，发现scoop安装不太好用（有可能是网路问题），所以就没继续搞下去了。</p>
<p>作者直接提供了一个可执行版本，可以直接在windows系统安装。这里我就直接安装了。</p>
<p>安装完成之后，可以添加一个hosts。</p>
<p>在新的hosts文件中，设置Type为remote，设置相应的url（该项目在码云上更新的dns节点代码），更新间隔建议一个小时。打开软件挂在后台就可以了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/09/使用DNS映射解决Github访问缓慢的问题/" data-id="cknzrcec7000a5wujd4np124i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/其它/">其它</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-解决无法使用Pycharm自带的pip安装第三方库的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/" class="article-date">
  <time datetime="2020-12-09T01:42:59.000Z" itemprop="datePublished">2020-12-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/">解决无法使用Pycharm自带的pip安装第三方库的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上次写可视化作业的时候，用pycharm出现了一个问题：无法直接使用IDE的setting中的pip安装第三方库。</p>
<p>几经周折之下，在Stack Overflow上找到了解答。</p>
<p>只要在新建项目的时候添加一个设定就可以了！</p>
<br>

<p>解决方法：</p>
<p>使用Pycharm，点击New Project，选择Pure Python（使用新建flask项目和Django项目的时候，我没有遇到上述的问题），<strong>勾选inherit global-site packges</strong>，新建项目即可~</p>
<br>

<p>由于Pycharm新建Pure Python项目的时候，是默认只使用本地的包的，所以当IDE使用pip命令下载第三方库的时候，系统会报错。只能直接只用终端的pip命令，才能够正常安装包。</p>
<p>勾选inherit选项能够允许IDE继承全局的第三方库，即Pycharm能够帮用户安装包，问题得到解决。</p>
<p><a href="https://stackoverflow.com/questions/51292729/pycharm-cannt-find-the-packages-or-modules-installed-with-pip-on-windows" target="_blank" rel="noopener">参考文章</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/09/解决无法使用Pycharm自带的pip安装第三方库的问题/" data-id="cknzrced8001t5wuj7da5xs13" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/" class="article-date">
  <time datetime="2020-12-06T02:33:44.000Z" itemprop="datePublished">2020-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/">使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这周要完成大数据可视化的第一次作业，使用python实现最近很火的条形图竞赛效果。</p>
<p>上知乎参考了一下已有的代码，结合自己的需求，修改了一下。</p>
<p>在github上找到了大佬整理丁香园的新冠疫情数据，直接fork下来了。</p>
<br>

<h2 id="需要解决的问题："><a href="#需要解决的问题：" class="headerlink" title="需要解决的问题："></a>需要解决的问题：</h2><ol>
<li><h3 id="根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案："><a href="#根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案：" class="headerlink" title="根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案："></a>根据给定数据的属性（如不同的省份）类别，生成对应的颜色方案：</h3><ol>
<li>我的思路是导出目标属性列，使用set集合去重，获得颜色方案的数目</li>
<li>使用<code>pyplot.cm.get_cmap()</code>方法，根据需要的配色方案，生成随机颜色</li>
<li>把颜色和属性值映射到一个字典上，方便后续绘图调用</li>
<li>除了这种方案，还可以生成随机数转十六进制，获取RBG颜色方案，详细见被注释起来的代码</li>
</ol>
</li>
<li><h3 id="获得具体日期序列"><a href="#获得具体日期序列" class="headerlink" title="获得具体日期序列"></a>获得具体日期序列</h3><ol>
<li>由于收集数据的dateId是整型数据，不能直接用<code>range()</code>生成序列（否则会出现20200166这种不存在的日期）</li>
<li>可以使用datetime标准库生成某段日期之间的时间序列，指定数据中的dateId</li>
<li>在绘图的时候，直接打印dateId的效果不太好，绘图是应该在把dateId转换为xxx年xx月xx日的中文格式</li>
</ol>
</li>
<li><h3 id="关于可视化图的实现"><a href="#关于可视化图的实现" class="headerlink" title="关于可视化图的实现"></a>关于可视化图的实现</h3><ol>
<li>可以参照具体的代码，这一部分主要是参照其它大佬的</li>
<li>使用matplotlib的animation库多次调用绘图函数，根据不同的日期绘制动图的某一帧</li>
<li>关于动图帧，就是根据累计治愈人数把筛选出来的数据排序，再根据省份名把颜色对应上去绘制条形图</li>
<li>当然除了绘制条形图还要绘制个各种标签，具体实现这里不展开</li>
</ol>
</li>
</ol>
<br>

<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p>由于目前域名还没有备案，图床暂时挂了，等元旦域名备案之后，就把图片补上来！</p>
<br>

<h2 id="具体的代码如下："><a href="#具体的代码如下：" class="headerlink" title="具体的代码如下："></a>具体的代码如下：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> ticker</span><br><span class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">draw_barchart</span><span class="params">(dateId)</span>:</span></span><br><span class="line">    <span class="comment"># 截取某一天的数据，并且使用value排序，保留前十项数据，用于绘制</span></span><br><span class="line">    dff = df[df[<span class="string">'dateId'</span>].eq(dateId)].sort_values(by=<span class="string">'curedCount'</span>, ascending=<span class="literal">True</span>).tail(<span class="number">10</span>)</span><br><span class="line">    ax.clear()  <span class="comment"># 清空上次绘制的图像</span></span><br><span class="line">    <span class="comment"># 根据不同城市的名字，配置不同的颜色，绘制条形图</span></span><br><span class="line">    ax.barh(dff[<span class="string">'provinceShortName'</span>], dff[<span class="string">'curedCount'</span>], color=[color_dic.get(x) <span class="keyword">for</span> x <span class="keyword">in</span> dff[<span class="string">'provinceShortName'</span>]])</span><br><span class="line">    <span class="comment"># 绘制每行的标签和属性值文本</span></span><br><span class="line">    dx = dff[<span class="string">'curedCount'</span>].max() / <span class="number">200</span>  <span class="comment"># 规定每个标签文本和条形终点的间隔</span></span><br><span class="line">    <span class="keyword">for</span> i, (curedCount, provinceShortName) <span class="keyword">in</span> enumerate(zip(dff[<span class="string">'curedCount'</span>], dff[<span class="string">'provinceShortName'</span>])):</span><br><span class="line">        ax.text(curedCount - dx, i, provinceShortName, size=<span class="number">14</span>, weight=<span class="number">600</span>, ha=<span class="string">'right'</span>, va=<span class="string">'bottom'</span>)  <span class="comment"># 绘制省份名</span></span><br><span class="line">        ax.text(curedCount + dx, i, <span class="string">f'<span class="subst">&#123;curedCount:,<span class="number">.0</span>f&#125;</span>'</span>, size=<span class="number">14</span>, ha=<span class="string">'left'</span>, va=<span class="string">'center'</span>)  <span class="comment"># 绘制属性值</span></span><br><span class="line">    <span class="comment"># 配置整体的显示效果</span></span><br><span class="line">    dateStr = str(dateId)</span><br><span class="line">    date_str_fmt = <span class="string">"&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日"</span>.format(dateStr[:<span class="number">4</span>], dateStr[<span class="number">4</span>:<span class="number">6</span>], dateStr[<span class="number">6</span>:])  <span class="comment"># 把日期id转换为中文格式</span></span><br><span class="line">    ax.text(<span class="number">1</span>, <span class="number">0.2</span>, date_str_fmt, transform=ax.transAxes, color=<span class="string">'#777777'</span>, size=<span class="number">46</span>, ha=<span class="string">'right'</span>, weight=<span class="number">800</span>)  <span class="comment"># 绘制日期id</span></span><br><span class="line">    ax.text(<span class="number">0</span>, <span class="number">1.06</span>, <span class="string">'累计治愈人数(单位：人)'</span>, transform=ax.transAxes, size=<span class="number">12</span>, color=<span class="string">'#777777'</span>)  <span class="comment"># 绘制标签单位注解</span></span><br><span class="line">    ax.xaxis.set_major_formatter(ticker.StrMethodFormatter(<span class="string">'&#123;x:,.0f&#125;'</span>))</span><br><span class="line">    ax.xaxis.set_ticks_position(<span class="string">'top'</span>)</span><br><span class="line">    ax.tick_params(axis=<span class="string">'x'</span>, colors=<span class="string">'#777777'</span>, labelsize=<span class="number">12</span>)</span><br><span class="line">    ax.set_yticks([])</span><br><span class="line">    ax.margins(<span class="number">0</span>, <span class="number">0.01</span>)</span><br><span class="line">    ax.grid(which=<span class="string">'major'</span>, axis=<span class="string">'x'</span>, linestyle=<span class="string">'-'</span>)</span><br><span class="line">    ax.set_axisbelow(<span class="literal">True</span>)</span><br><span class="line">    ax.text(<span class="number">0</span>, <span class="number">1.10</span>, <span class="string">'2020年1月31日到7月2日全国(除湖北省外)各省份及地区累计新冠治愈病例可视化图'</span>,</span><br><span class="line">            transform=ax.transAxes, size=<span class="number">24</span>, weight=<span class="number">600</span>, ha=<span class="string">'left'</span>)</span><br><span class="line">    plt.box(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">datelist</span><span class="params">(beginDate, endDate)</span>:</span></span><br><span class="line">    <span class="comment"># beginDate, endDate是形如‘20160601’的整形列表</span></span><br><span class="line">    date_l=[datetime.strftime(x,<span class="string">'%Y%m%d'</span>) <span class="keyword">for</span> x <span class="keyword">in</span> list(pd.date_range(start=beginDate, end=endDate))]</span><br><span class="line">    date_set = list()</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> date_l:</span><br><span class="line">        date_set.append(int(x))</span><br><span class="line">    <span class="keyword">return</span> date_set</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    mpl.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'FangSong'</span>]  <span class="comment"># 指定默认中文字体</span></span><br><span class="line"></span><br><span class="line">    data_route = <span class="string">'china_provincedata_without_HB.csv'</span>  <span class="comment"># 载入疫情数据，根据累计治愈，日期和省份缩写筛选三列信息</span></span><br><span class="line">    df = pd.read_csv(data_route, usecols=[<span class="string">'curedCount'</span>, <span class="string">'dateId'</span>, <span class="string">'provinceShortName'</span>])</span><br><span class="line"></span><br><span class="line">    pvc_list = list(set(df[<span class="string">'provinceShortName'</span>]))  <span class="comment"># 获取省份列表</span></span><br><span class="line">    pvc_num = len(pvc_list)</span><br><span class="line">    cmap = plt.cm.get_cmap(<span class="string">"hsv"</span>, pvc_num + <span class="number">1</span>)  <span class="comment"># 随机生成省份数目对应的配色方案</span></span><br><span class="line">    <span class="comment"># 生成配色方案字典  如：&#123;'广东': (1.0, 0.0, 0.0, 1.0)&#125;</span></span><br><span class="line">    color_dic = dict()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(pvc_num):</span><br><span class="line">        <span class="comment"># rc = lambda: random.randint(0, 255)</span></span><br><span class="line">        <span class="comment"># color_dic.update(&#123;pvc_list[i]: ('#%02X%02X%02X' % (rc(), rc(), rc()))&#125;)</span></span><br><span class="line">        color_dic.update(&#123;pvc_list[i]: cmap(i)&#125;)</span><br><span class="line"></span><br><span class="line">    fig, ax = plt.subplots(figsize=(<span class="number">15</span>, <span class="number">8</span>))  <span class="comment"># 指定生成图的尺寸</span></span><br><span class="line"></span><br><span class="line">    date_set = datelist(<span class="string">'2020/1/31'</span>, <span class="string">'2020/07/02'</span>)</span><br><span class="line">    animator = animation.FuncAnimation(fig, draw_barchart, frames=date_set)  <span class="comment"># 生成动画</span></span><br><span class="line">    animator.save(<span class="string">'新冠疫情累计治愈数据可视化.gif'</span>)  <span class="comment"># 保存gif</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/12/06/使用Python可视化全国各省（除湖北）新冠疫情累计治愈病例数据/" data-id="cknzrcecd000h5wujqs8m7xdr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-关于Spring-Security文档上密码发展史的阅读报告" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/" class="article-date">
  <time datetime="2020-11-24T10:43:05.000Z" itemprop="datePublished">2020-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/">关于Spring Security文档上密码发展史的阅读报告</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这周做实验，服务器宕机了</p>
<p>刚好闲着无聊，有机会看一下<a href="https://docs.spring.io/spring-security/site/docs/5.4.1/reference/html5/#features" target="_blank" rel="noopener">security的文档</a>。</p>
<p>突然看到一段密码存储的发展史</p>
<p>个人觉得挺有意思的，记录一下</p>
<br>

<br>

<h2 id="简单翻译记录一下："><a href="#简单翻译记录一下：" class="headerlink" title="简单翻译记录一下："></a>简单翻译记录一下：</h2><p>一开始用于用户认证的密码，是直接以文本形式存储在服务器的。</p>
<p>也就是说，用户的密码没有经过任何加密就直接存储在服务器的。</p>
<p>在这种情况下，有的黑客使用SQL inject等技术，攻击服务器，直接穷举出用户的密码。</p>
<p>然后利用窃取的密码，查看用户持有的数据！</p>
<p>为了应对这种情况，有开发者使用了哈希函数进行加密</p>
<p>将用户的密码进行一次哈希加密，再存储到数据库当中</p>
<p>这样，即便黑客通过服务器数据库穷举到了用户密码对应的哈希值，还是很难知道哈希值对应的用户密码</p>
<p>因此，用户密码的安全性暂时得以保障。</p>
<br>

<p>可是，道高一尺魔高一丈，黑客们又开始想到了Rainbow Table技术</p>
<p>黑客长时间穷举用户密码，并且把穷举像存储到一个彩虹表中，然后一次性攻击窃取密码</p>
<p>为了应对RainbowTable，开发者们开始使用“腌制过的密码”存储用户密码。</p>
<p>腌制过的密码是指，加入了salt的密码</p>
<p>salt是每个用户特有的一串字符</p>
<p>服务器存储的密码，通过salt和用户密码文本进行混合哈希运算，得到哈希值</p>
<p>通过这种技术，加大了黑客穷举密码的难度~</p>
<br>

<p>但是，随着计算机硬件的不断发展。</p>
<p>我们知道，现在的机器已经可以快速穷举256位的字符串来穷举密码了，所以”Salted Password”也不好用了</p>
<p>现在，开发者们建议使用自适应的单射函数（adaptive one-way function）进行哈希映射</p>
<p>这种哈希映射，可以给存储的密码提供一个工作因子（work factor）</p>
<p>工作因子可以根据客户端的硬件水平，让用户在客户端花一秒左右的时间才能完成哈希映射</p>
<p>通过这种技术，可以防止黑客短时间内发动多次密码穷举，保证了用户密码的安全性。</p>
<p>而Spring Security框架可以直接使用 bcrypt, PBKDF2, scrypt和argon2等加密方式</p>
<p>这些加密方式就是上面的加密手段，可以大大提高用户密码的安全性。</p>
<br>

<br>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>可以说这篇文档上所写的密码的发展史，是一部开发者和黑客斗智斗勇的历史</p>
<p>当然数学家在其中也扮演了极其重要的角色</p>
<p>随着技术的发展，我们有理由相信，新的破解技术会不断地产生，新的加密手段也会应运而生</p>
<p>到时候，我们这些只会复制粘贴的小菜鸡应该能够看到更为精彩的现代密码学“神仙打架”啦！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/24/关于Spring-Security文档上密码发展史的阅读报告/" data-id="cknzrcecq000z5wujsjcddw1t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后端/">后端</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-大数据架构作业-简答题7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/24/大数据架构作业-简答题7/" class="article-date">
  <time datetime="2020-11-24T10:37:49.000Z" itemprop="datePublished">2020-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/24/大数据架构作业-简答题7/">大数据架构作业-简答题7</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>最后一次大数据架构超星作业了，终于结束了罪恶的ppt复制粘贴答题了。</em></p>
<br>

<br>

<blockquote>
<h2 id="1-简要说明流数据的特点以及流计算的需求和处理流程。"><a href="#1-简要说明流数据的特点以及流计算的需求和处理流程。" class="headerlink" title="1 简要说明流数据的特点以及流计算的需求和处理流程。"></a>1 简要说明流数据的特点以及流计算的需求和处理流程。</h2></blockquote>
<h3 id="流数据的特点："><a href="#流数据的特点：" class="headerlink" title="流数据的特点："></a>流数据的特点：</h3><ol>
<li>无穷无尽的数据连续、快速地传输；</li>
<li>数据的来源众多，而且格式复杂；</li>
<li>数据量巨大，一般不关注存储，经过处理之后会被丢弃或者被归档存储；</li>
<li>不会过分关注个别数据，注重数据的整体价值；</li>
<li>数据的顺序有可能颠倒，或者不完整。</li>
</ol>
<br>

<h3 id="流计算系统的需求："><a href="#流计算系统的需求：" class="headerlink" title="流计算系统的需求："></a>流计算系统的需求：</h3><ol>
<li>高性能；</li>
<li>海量处理；</li>
<li>实时处理；</li>
<li>分布式处理；</li>
<li>简单易用；</li>
<li>可靠性高。</li>
</ol>
<br>

<h3 id="流计算的处理流程："><a href="#流计算的处理流程：" class="headerlink" title="流计算的处理流程："></a>流计算的处理流程：</h3><ol>
<li>数据实时采集；</li>
<li>数据实时计算；</li>
<li>提供实时查询服务。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="2-简要说明Spark解决流计算的基本思路和不足之处。"><a href="#2-简要说明Spark解决流计算的基本思路和不足之处。" class="headerlink" title="2 简要说明Spark解决流计算的基本思路和不足之处。"></a>2 简要说明Spark解决流计算的基本思路和不足之处。</h2></blockquote>
<h3 id="Spark解决流计算的思路："><a href="#Spark解决流计算的思路：" class="headerlink" title="Spark解决流计算的思路："></a>Spark解决流计算的思路：</h3><p>Spark使用Spark Streaming处理流数据，把数据流以时间片为单位，切割成一段一段的数据，每段数据作为一个批处理请求，通过Spark批处理引擎，模仿实现流处理。</p>
<br>

<h3 id="Spark处理流计算的不足之处："><a href="#Spark处理流计算的不足之处：" class="headerlink" title="Spark处理流计算的不足之处："></a>Spark处理流计算的不足之处：</h3><p>Spark Streaming无法实现毫秒级需求的流计算业务，进而无法承载实时性要求很高的应用。</p>
<br>

<br>

<blockquote>
<h2 id="3-说明Flink框架中处理时间和事件时间的概念和区别。"><a href="#3-说明Flink框架中处理时间和事件时间的概念和区别。" class="headerlink" title="3 说明Flink框架中处理时间和事件时间的概念和区别。"></a>3 说明Flink框架中处理时间和事件时间的概念和区别。</h2></blockquote>
<h3 id="处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。"><a href="#处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。" class="headerlink" title="处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。"></a>处理时间：指流处理应用程序机器，在处理数据流时，所对应的本地时钟时间。处理时间窗口中包含了一个时间段内，所有发送到机器的事件。</h3><br>

<h3 id="事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。"><a href="#事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。" class="headerlink" title="事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。"></a>事件时间：指数据流中，事件实际发生的时间。在事件进入流处理程序之前，事件数据就包含了时间戳。事件时间可以真实地反映，事件是如何发生的。</h3><br>

<h3 id="处理时间和事件时间的区别："><a href="#处理时间和事件时间的区别：" class="headerlink" title="处理时间和事件时间的区别："></a>处理时间和事件时间的区别：</h3><ol>
<li>由于数据流可能存在延迟或者乱序到达，两者的具体数值可能相差极大；</li>
<li>处理时间的结果取决于处理速度，不能够保证其结果的准确性，可以实现低延迟特性；</li>
<li>事件时间可以处理迟到和乱序的事件流，可以保证结果的确定性。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="4-简要介绍Flink提供的窗口操作及其分类。"><a href="#4-简要介绍Flink提供的窗口操作及其分类。" class="headerlink" title="4 简要介绍Flink提供的窗口操作及其分类。"></a>4 简要介绍Flink提供的窗口操作及其分类。</h2></blockquote>
<h3 id="窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。"><a href="#窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。" class="headerlink" title="窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。"></a>窗口操作的概念：窗口操作是Flink在数据流上的一种操作手段，需要收集并且缓存一段时间内的事件进行计算。</h3><br>

<h3 id="窗口操作的分类："><a href="#窗口操作的分类：" class="headerlink" title="窗口操作的分类："></a>窗口操作的分类：</h3><ol>
<li>时间窗口；</li>
<li>技术窗口；</li>
<li>滚动窗口；</li>
<li>滑动窗口；</li>
<li>会话窗口。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="5-什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。"><a href="#5-什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。" class="headerlink" title="5 什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。"></a>5 什么是Flink的状态（state），Flink如何保证在网络故障的情况下状态能够恢复并保持一致。</h2></blockquote>
<h3 id="Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。"><a href="#Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。" class="headerlink" title="Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。"></a>Flink的状态：状态是指流计算过程中，计算节点的中间计算结果或者元数据状态。</h3><br>

<h3 id="Flink保持状态持久和恢复的机制："><a href="#Flink保持状态持久和恢复的机制：" class="headerlink" title="Flink保持状态持久和恢复的机制："></a>Flink保持状态持久和恢复的机制：</h3><ol>
<li>状态一致检查点。是指当所有任务的状态，在所有任务都处理完一个相同数据时，的一份状态拷贝。</li>
<li>全局一致性快照。使用检查点，记录文件系统集群所有节点的在某一时间点的状态。</li>
<li>通过分布式快照和状态检查点，实现了精确一次的语义，在各种故障的情况下，处理数据流的所有算子都保证，数据和事件只会被处理一次。具体操作如下：<ol>
<li>对流处理应哟红的每个算子的所有状态，定期做检查点；</li>
<li>若系统中任何地方发生错误，每个算子的所有状态回滚到最近的全局一致性快照；</li>
<li>整个流处理应用程序，回到最近的一次一致性状态，然后在该状态重新启动。</li>
</ol>
</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="6-举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。"><a href="#6-举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。" class="headerlink" title="6 举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。"></a>6 举例说明逻辑流图、物理数据流图的概念以及不同类型数据交换策略。</h2></blockquote>
<h3 id="逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。"><a href="#逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。" class="headerlink" title="逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。"></a>逻辑流图的概念：用于程序在描述数据流中的数据，在算子节点之间的流动，以有向图的形式表现。</h3><br>

<h3 id="物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。"><a href="#物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。" class="headerlink" title="物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。"></a>物理数据流图：用于说明程序的执行方式，描述数据在任务节点之间的流动，以有向图的形式表现。</h3><br>

<h3 id="数据交换策略类型："><a href="#数据交换策略类型：" class="headerlink" title="数据交换策略类型："></a>数据交换策略类型：</h3><ol>
<li>前向策略，将数据从一个任务发送到一个接受任务；</li>
<li>广播策略，将数据发送到算子的所有并行任务上；</li>
<li>基于键控的策略，通过键值对数据进行分区，保证相同键值的数据经同一任务处理；</li>
<li>随机策略，随机分配数据，便于将负载均匀分配到不同的计算任务。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="7-简要说明Flink架构中的主要角色及其功能。"><a href="#7-简要说明Flink架构中的主要角色及其功能。" class="headerlink" title="7 简要说明Flink架构中的主要角色及其功能。"></a>7 简要说明Flink架构中的主要角色及其功能。</h2></blockquote>
<h3 id="Flink架构中的主要角色以及功能："><a href="#Flink架构中的主要角色以及功能：" class="headerlink" title="Flink架构中的主要角色以及功能："></a>Flink架构中的主要角色以及功能：</h3><ol>
<li>Job Manager：作业管理器，又称为Master，负责资源申请、协调任务的分布式执行、协调检查点和失败恢复。</li>
<li>Task Manager：任务管理器，又称为Worker，负责任务执行，与Job Manager保持心跳沟通和汇报任务状态。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="8-说明Flink-on-YARN的两种作业运行模式。"><a href="#8-说明Flink-on-YARN的两种作业运行模式。" class="headerlink" title="8 说明Flink on YARN的两种作业运行模式。"></a>8 说明Flink on YARN的两种作业运行模式。</h2></blockquote>
<h3 id="Flink-on-YARN的两种作业运行模式："><a href="#Flink-on-YARN的两种作业运行模式：" class="headerlink" title="Flink on YARN的两种作业运行模式："></a>Flink on YARN的两种作业运行模式：</h3><ol>
<li><h4 id="会话方式："><a href="#会话方式：" class="headerlink" title="会话方式："></a>会话方式：</h4><ol>
<li>使用Flink中的yarn-session，启动Job Manager和Task Manager之后，yarn-session一直保持运行，等待接收客户端提交作业；</li>
<li>客户端通过yarn-session提交作业；</li>
<li>这种方式适合处理数量比较大，但是数据量比较小的作业。</li>
</ol>
</li>
<li><h4 id="分离模式："><a href="#分离模式：" class="headerlink" title="分离模式："></a>分离模式：</h4><ol>
<li>使用yarn-session直接提交作业到YARN集群；</li>
<li>这种方式适合处理数据量比较大的作业。</li>
</ol>
</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="9-说明Flink任务的调度与执行过程。"><a href="#9-说明Flink任务的调度与执行过程。" class="headerlink" title="9 说明Flink任务的调度与执行过程。"></a>9 说明Flink任务的调度与执行过程。</h2></blockquote>
<h3 id="Flin任务调度与执行："><a href="#Flin任务调度与执行：" class="headerlink" title="Flin任务调度与执行："></a>Flin任务调度与执行：</h3><ol>
<li>程序代码提交到应用程序的优化器或者图生成器，生成Dataflow提交到客户端的Actor系统；</li>
<li>Actor客户端提交作业，发送Dataflow到JobManager；</li>
<li>JobManager不断监听TaskManager的心跳消息，可以获取到有效的TaskManager信息；</li>
<li>JobManager通过调度器在TaskManager中调度任务，由任务槽执行任务；</li>
<li>程序运行的是时候，任务之间可以进行数据流传输。</li>
</ol>
<br>

<br>

<blockquote>
<h2 id="10-举例说明Flink程序开发的代码基本框架。"><a href="#10-举例说明Flink程序开发的代码基本框架。" class="headerlink" title="10 举例说明Flink程序开发的代码基本框架。"></a>10 举例说明Flink程序开发的代码基本框架。</h2></blockquote>
<h3 id="Flink程序开发的代码基本框架："><a href="#Flink程序开发的代码基本框架：" class="headerlink" title="Flink程序开发的代码基本框架："></a>Flink程序开发的代码基本框架：</h3><ol>
<li>获取执行环境；</li>
<li>加载或者创建初始数据；</li>
<li>指定对该数据的转换；</li>
<li>指定结果的存储位置；</li>
<li>触发程序执行。</li>
</ol>
<br>

<br>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/11/24/大数据架构作业-简答题7/" data-id="cknzrced5001o5wujc3blmyk4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/课程作业/">课程作业</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其它/">其它</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程语言入门/">编程语言入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/课程作业/">课程作业</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/项目/">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/其它/" style="font-size: 12.5px;">其它</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/后端/" style="font-size: 20px;">后端</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/编程语言入门/" style="font-size: 15px;">编程语言入门</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/课程作业/" style="font-size: 17.5px;">课程作业</a> <a href="/tags/项目/" style="font-size: 10px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/27/使用js和后端模糊查询实现搜索提示功能/">使用js和后端模糊查询实现搜索提示功能</a>
          </li>
        
          <li>
            <a href="/2021/04/27/使用Docker部署jar包/">使用Docker部署jar包</a>
          </li>
        
          <li>
            <a href="/2021/04/15/毕节市可视化Java项目博客记录-日期格式的转换/">毕节市可视化Java项目博客记录----日期格式的转换</a>
          </li>
        
          <li>
            <a href="/2021/04/08/工作室技术分享会/">工作室技术分享会</a>
          </li>
        
          <li>
            <a href="/2020/12/18/阿里云《Serverless云开发从入门到实战》学习笔记/">阿里云《Serverless云开发从入门到实战》学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Miaopashi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>